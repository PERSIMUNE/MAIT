
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Function Reference &#8212; How to use medical artificial intelligence toolbox (MAIT)</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'function_reference';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Executed tutorials" href="Executed_tutorials.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="How to use medical artificial intelligence toolbox (MAIT) - Home"/>
    <img src="_static/logo.png" class="logo__image only-dark pst-js-only" alt="How to use medical artificial intelligence toolbox (MAIT) - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    How to use medical artificial intelligence toolbox (MAIT)
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="QuickStart.html">QuickStart - minimal configuration guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="MANUAL.html">MAIT 1.0.0 Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="MAIT_Tutorial_BreastCancer_pub.html">MAIT 1.0.0 - Tutorial: Breast cancer prediction</a></li>
<li class="toctree-l1"><a class="reference internal" href="MAIT_Tutorial_Dementia_pub.html">MAIT 1.0.0 - Tutorial: Dementia prediction</a></li>
<li class="toctree-l1"><a class="reference internal" href="MAIT_Tutorial_Azithromycin_pub.html">MAIT 1.0.0 - Tutorial: Azithromycin antibiotic resistance prediction based on unitigs representing DNA variation in bacteria</a></li>
<li class="toctree-l1"><a class="reference internal" href="MAIT_Tutorial_Ciprofloxacin_pub.html">MAIT 1.0.0 - Tutorial: Ciprofloxacin antibiotic resistance prediction based on unitigs representing DNA variation in bacteria</a></li>
<li class="toctree-l1"><a class="reference internal" href="Executed_tutorials.html">Executed tutorials</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Function Reference</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/PERSIMUNE/MAIT" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/PERSIMUNE/MAIT/issues/new?title=Issue%20on%20page%20%2Ffunction_reference.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/function_reference.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Function Reference</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#glossary">Glossary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#del-self"><code class="docutils literal notranslate"><span class="pre">__del__(self)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#init-self"><code class="docutils literal notranslate"><span class="pre">__init__(self)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adjust-hyperparameters-n-rows-n-cols"><code class="docutils literal notranslate"><span class="pre">adjust_hyperparameters(n_rows,</span> <span class="pre">n_cols)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parameters">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#returns">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adjust-hyperparameters-surv-models-n-rows"><code class="docutils literal notranslate"><span class="pre">adjust_hyperparameters_surv_models(n_rows)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aggregate-shap-values-with-base-survshaps-x-test-surv-aggregation-mean-abs"><code class="docutils literal notranslate"><span class="pre">aggregate_shap_values_with_base(survshaps,</span> <span class="pre">X_test_surv,</span> <span class="pre">aggregation='mean_abs')</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bootstrap-sample-data-n-samples"><code class="docutils literal notranslate"><span class="pre">bootstrap_sample(data,</span> <span class="pre">n_samples)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-biserial-corr-subsample-outcome-var"><code class="docutils literal notranslate"><span class="pre">calculate_biserial_corr(subsample,</span> <span class="pre">outcome_var)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-confidence-interval-metric-values-alpha-0-95"><code class="docutils literal notranslate"><span class="pre">calculate_confidence_interval(metric_values,</span> <span class="pre">alpha=0.95)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-metrics-y-true-y-pred-y-pred-proba"><code class="docutils literal notranslate"><span class="pre">calculate_metrics(y_true,</span> <span class="pre">y_pred,</span> <span class="pre">y_pred_proba)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-missingness-data-output-file-missingness-report-xlsx"><code class="docutils literal notranslate"><span class="pre">calculate_missingness(data,</span> <span class="pre">output_file='missingness_report.xlsx')</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-mutual-info-subsample-outcome-var"><code class="docutils literal notranslate"><span class="pre">calculate_mutual_info(subsample,</span> <span class="pre">outcome_var)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-surv-metrics-y-true-model-x-test-survival-train-survival-test"><code class="docutils literal notranslate"><span class="pre">calculate_surv_metrics(y_true,</span> <span class="pre">model,</span> <span class="pre">X_test,</span> <span class="pre">survival_train,</span> <span class="pre">survival_test)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#categorical-shap-plot-shap-values-data-top-n-10-jitter-0-1"><code class="docutils literal notranslate"><span class="pre">categorical_shap_plot(shap_values,</span> <span class="pre">data,</span> <span class="pre">top_n=10,</span> <span class="pre">jitter=0.1)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#check-categorical-difference-train-data-test-data"><code class="docutils literal notranslate"><span class="pre">check_categorical_difference(train_data,</span> <span class="pre">test_data)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#check-numerical-difference-train-data-test-data"><code class="docutils literal notranslate"><span class="pre">check_numerical_difference(train_data,</span> <span class="pre">test_data)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id22">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id23">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#combined-metric-y-true-y-pred-proba"><code class="docutils literal notranslate"><span class="pre">combined_metric(y_true,</span> <span class="pre">y_pred_proba)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id24">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id25">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conformal-p-value-prob-calibration-scores-true-label"><code class="docutils literal notranslate"><span class="pre">conformal_p_value(prob,</span> <span class="pre">calibration_scores,</span> <span class="pre">true_label)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id26">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id27">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cost-sensitive-net-benefit-tp-fp-threshold-n-w-tp-1-w-fp-1"><code class="docutils literal notranslate"><span class="pre">cost_sensitive_net_benefit(tp,</span> <span class="pre">fp,</span> <span class="pre">threshold,</span> <span class="pre">N,</span> <span class="pre">w_tp=1,</span> <span class="pre">w_fp=1)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id28">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id29">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-summary-table-dataframe-dataset-name"><code class="docutils literal notranslate"><span class="pre">create_summary_table(dataframe,</span> <span class="pre">dataset_name)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id30">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id31">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cross-validate-model-model-class-x-y-sample-weights-none-n-splits-cv-folds-random-state-seed-measures-none-use-default-threshold-false"><code class="docutils literal notranslate"><span class="pre">cross_validate_model(model_class,</span> <span class="pre">X,</span> <span class="pre">y,</span> <span class="pre">sample_weights=None,</span> <span class="pre">n_splits=cv_folds,</span> <span class="pre">random_state=SEED,</span> <span class="pre">measures=None,</span> <span class="pre">use_default_threshold=False)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id32">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id33">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cross-validate-surv-model-model-class-x-y-n-splits-cv-folds-random-state-seed-measures-none-hp-tuning-false"><code class="docutils literal notranslate"><span class="pre">cross_validate_surv_model(model_class,</span> <span class="pre">X,</span> <span class="pre">y,</span> <span class="pre">n_splits=cv_folds,</span> <span class="pre">random_state=SEED,</span> <span class="pre">measures=None,</span> <span class="pre">hp_tuning=False)</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#function-signature">Function Signature</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id34">Parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#function-behavior">Function Behavior</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id35">Returns</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#decision-curve-analysis-pred-probs-selected-model-pred-probs-alternative-model-rand-pred-probs-w-tp-1-w-fp-1"><code class="docutils literal notranslate"><span class="pre">decision_curve_analysis(pred_probs_selected_model,</span> <span class="pre">pred_probs_alternative_model,</span> <span class="pre">rand_pred_probs,</span> <span class="pre">w_tp=1,</span> <span class="pre">w_fp=1)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id36">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id37">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#display-confusion-matrix-y-true-y-pred-labels"><code class="docutils literal notranslate"><span class="pre">display_confusion_matrix(y_true,</span> <span class="pre">y_pred,</span> <span class="pre">labels)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id38">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id39">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#euclidean-distance-x-y"><code class="docutils literal notranslate"><span class="pre">euclidean_distance(x,</span> <span class="pre">y)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id40">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id41">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#evaluate-and-plot-model-model-testset-y-test-filename-class-labels-class-labels-display-threshold-0-5-bootstrap-samples-1000-min-positive-instances-1"><code class="docutils literal notranslate"><span class="pre">evaluate_and_plot_model(model,</span> <span class="pre">testset,</span> <span class="pre">y_test,</span> <span class="pre">filename,</span> <span class="pre">class_labels=class_labels_display,</span> <span class="pre">threshold=0.5,</span> <span class="pre">bootstrap_samples=1000,</span> <span class="pre">min_positive_instances=1)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id42">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id43">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#evaluate-params-n-epochs-max-complexity"><code class="docutils literal notranslate"><span class="pre">evaluate_params(n_epochs,</span> <span class="pre">max_complexity)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id44">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#evaluate-params-kfold-n-epochs-max-complexity"><code class="docutils literal notranslate"><span class="pre">evaluate_params_kfold(n_epochs,</span> <span class="pre">max_complexity)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id45">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id46">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#extract-mean-value"><code class="docutils literal notranslate"><span class="pre">extract_mean(value)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id47">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#f-imp-shapboxplot-shap-values-x-test-ohe-x-test-selected-model-data-dictionary-num-features-20-num-subsamples-1000-random-seed-none-apply-threshold-false"><code class="docutils literal notranslate"><span class="pre">f_imp_shapboxplot(shap_values,</span> <span class="pre">X_test_OHE,</span> <span class="pre">X_test,</span> <span class="pre">selected_model,</span> <span class="pre">data_dictionary,</span> <span class="pre">num_features=20,</span> <span class="pre">num_subsamples=1000,</span> <span class="pre">random_seed=None,</span> <span class="pre">apply_threshold=False)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id48">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#f-imp-shapboxplot-surv-shap-values-x-test-num-features-20-num-subsamples-1000-random-seed-none-apply-threshold-false"><code class="docutils literal notranslate"><span class="pre">f_imp_shapboxplot_surv(shap_values,</span> <span class="pre">X_test,</span> <span class="pre">num_features=20,</span> <span class="pre">num_subsamples=1000,</span> <span class="pre">random_seed=None,</span> <span class="pre">apply_threshold=False)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id49">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id50">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filter-columns-df-threshold-0-9"><code class="docutils literal notranslate"><span class="pre">filter_columns(df,</span> <span class="pre">threshold=0.9)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id51">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id52">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filter-rows-df-threshold-0-9"><code class="docutils literal notranslate"><span class="pre">filter_rows(df,</span> <span class="pre">threshold=0.9)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id53">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id54">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#find-feature-clusters-x-shap-values-selected-model-data-dictionary-top-n-f"><code class="docutils literal notranslate"><span class="pre">find_feature_clusters(X,</span> <span class="pre">shap_values,</span> <span class="pre">selected_model,</span> <span class="pre">data_dictionary,</span> <span class="pre">top_n_f)</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id55">Parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id56">Returns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#functionality">Functionality</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#notes">Notes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-subsample-df-seed"><code class="docutils literal notranslate"><span class="pre">generate_subsample(df,</span> <span class="pre">seed)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id57">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id58">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-conda-environment"><code class="docutils literal notranslate"><span class="pre">get_conda_environment()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id59">Returns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id60">Notes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-gpu-info"><code class="docutils literal notranslate"><span class="pre">get_gpu_info()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id61">Returns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id62">Notes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-python-info"><code class="docutils literal notranslate"><span class="pre">get_python_info()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id63">Returns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id64">Notes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-samples-per-class-x-y"><code class="docutils literal notranslate"><span class="pre">get_samples_per_class(X,</span> <span class="pre">y)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-system-info"><code class="docutils literal notranslate"><span class="pre">get_system_info()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id65">Returns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id66">Notes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#integrated-brier-score-survival-train-survival-test-estimate-times"><code class="docutils literal notranslate"><span class="pre">integrated_brier_score(survival_train,</span> <span class="pre">survival_test,</span> <span class="pre">estimate,</span> <span class="pre">times)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id67">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id68">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ipy-exit"><code class="docutils literal notranslate"><span class="pre">ipy_exit()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#is-hyperparameter-tuning-suitable-data-outcome-var-train-size-train-size-perc-n-splits-outer-cv-folds-n-splits-inner-cv-folds-hptuning"><code class="docutils literal notranslate"><span class="pre">is_hyperparameter_tuning_suitable(data,</span> <span class="pre">outcome_var,</span> <span class="pre">train_size=train_size_perc,</span> <span class="pre">n_splits_outer=cv_folds,</span> <span class="pre">n_splits_inner=cv_folds_hptuning)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id69">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id70">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parallel-compute-shap-surv-data-i"><code class="docutils literal notranslate"><span class="pre">parallel_compute_shap_surv(data,</span> <span class="pre">i)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id71">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#permute-feature-pairs-model-x-y-pairs-n-repeats-random-state-scoring-n-jobs"><code class="docutils literal notranslate"><span class="pre">permute_feature_pairs(model,</span> <span class="pre">X,</span> <span class="pre">y,</span> <span class="pre">pairs,</span> <span class="pre">n_repeats,</span> <span class="pre">random_state,</span> <span class="pre">scoring,</span> <span class="pre">n_jobs)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id72">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pfi-median-wrap-pfi-folds"><code class="docutils literal notranslate"><span class="pre">PFI_median_wrap(PFI_folds)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id73">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id74">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-confusion-matrix-for-clusters-x-y-cluster-info-model-shap-values-top-n"><code class="docutils literal notranslate"><span class="pre">plot_confusion_matrix_for_clusters(X,</span> <span class="pre">y,</span> <span class="pre">cluster_info,</span> <span class="pre">model,</span> <span class="pre">shap_values,</span> <span class="pre">top_n)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-pfi-pfi-folds-x-model-name"><code class="docutils literal notranslate"><span class="pre">plot_PFI(PFI_folds,</span> <span class="pre">X,</span> <span class="pre">model_name)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id75">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id76">Returns:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-samples-per-class-per-fold-samples-per-class-per-fold"><code class="docutils literal notranslate"><span class="pre">plot_samples_per_class_per_fold(samples_per_class_per_fold)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id77">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id78">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-survshap-detailed-shap-results-top-n-10-sample-percentage-100"><code class="docutils literal notranslate"><span class="pre">plot_survshap_detailed(shap_results,</span> <span class="pre">top_n=10,</span> <span class="pre">sample_percentage=100)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-tfi-x-tree-fi-model-name"><code class="docutils literal notranslate"><span class="pre">plot_TFI(X,</span> <span class="pre">tree_FI,</span> <span class="pre">model_name)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id79">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id80">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#save-notebook"><code class="docutils literal notranslate"><span class="pre">save_notebook()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id81">Notes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#set-parameters-n-rows-n-cols-class-proportion"><code class="docutils literal notranslate"><span class="pre">set_parameters(n_rows,</span> <span class="pre">n_cols,</span> <span class="pre">class_proportion)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id82">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id83">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#set-params-surv-models-n-rows"><code class="docutils literal notranslate"><span class="pre">set_params_surv_models(n_rows)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id84">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#shap-summary-plot-shap-values-data-model-name"><code class="docutils literal notranslate"><span class="pre">shap_summary_plot(shap_values,</span> <span class="pre">data,</span> <span class="pre">model_name)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id85">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#shorten-column-names-df-max-length"><code class="docutils literal notranslate"><span class="pre">shorten_column_names(df,</span> <span class="pre">max_length)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id86">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#shorten-data-dictionary-data-dict-max-length"><code class="docutils literal notranslate"><span class="pre">shorten_data_dictionary(data_dict,</span> <span class="pre">max_length)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id87">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id88">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#subsample-iqr-test-shap-values-num-subsamples-1000-threshold-0-confidence-level-0-95-random-seed-none"><code class="docutils literal notranslate"><span class="pre">subsample_iqr_test(shap_values,</span> <span class="pre">num_subsamples=1000,</span> <span class="pre">threshold=0,</span> <span class="pre">confidence_level=0.95,</span> <span class="pre">random_seed=None)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id89">Returns</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="function-reference">
<h1>Function Reference<a class="headerlink" href="#function-reference" title="Link to this heading">#</a></h1>
<section id="glossary">
<h2>Glossary<a class="headerlink" href="#glossary" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="#__del__"><span class="xref myst"><strong>del</strong></span></a></p></li>
<li><p><a class="reference internal" href="#__init__"><span class="xref myst"><strong>init</strong></span></a></p></li>
<li><p><a class="reference internal" href="#adjust_hyperparameters"><span class="xref myst">adjust_hyperparameters</span></a></p></li>
<li><p><a class="reference internal" href="#adjust_hyperparameters_surv_models"><span class="xref myst">adjust_hyperparameters_surv_models</span></a></p></li>
<li><p><a class="reference internal" href="#aggregate_shap_values_with_base"><span class="xref myst">aggregate_shap_values_with_base</span></a></p></li>
<li><p><a class="reference internal" href="#bootstrap_sample"><span class="xref myst">bootstrap_sample</span></a></p></li>
<li><p><a class="reference internal" href="#calculate_biserial_corr"><span class="xref myst">calculate_biserial_corr</span></a></p></li>
<li><p><a class="reference internal" href="#calculate_confidence_interval"><span class="xref myst">calculate_confidence_interval</span></a></p></li>
<li><p><a class="reference internal" href="#calculate_metrics"><span class="xref myst">calculate_metrics</span></a></p></li>
<li><p><a class="reference internal" href="#calculate_missingness"><span class="xref myst">calculate_missingness</span></a></p></li>
<li><p><a class="reference internal" href="#calculate_mutual_info"><span class="xref myst">calculate_mutual_info</span></a></p></li>
<li><p><a class="reference internal" href="#calculate_surv_metrics"><span class="xref myst">calculate_surv_metrics</span></a></p></li>
<li><p><a class="reference internal" href="#categorical_shap_plot"><span class="xref myst">categorical_shap_plot</span></a></p></li>
<li><p><a class="reference internal" href="#check_categorical_difference"><span class="xref myst">check_categorical_difference</span></a></p></li>
<li><p><a class="reference internal" href="#check_numerical_difference"><span class="xref myst">check_numerical_difference</span></a></p></li>
<li><p><a class="reference internal" href="#combined_metric"><span class="xref myst">combined_metric</span></a></p></li>
<li><p><a class="reference internal" href="#conformal_p_value"><span class="xref myst">conformal_p_value</span></a></p></li>
<li><p><a class="reference internal" href="#cost_sensitive_net_benefit"><span class="xref myst">cost_sensitive_net_benefit</span></a></p></li>
<li><p><a class="reference internal" href="#create_summary_table"><span class="xref myst">create_summary_table</span></a></p></li>
<li><p><a class="reference internal" href="#cross_validate_model"><span class="xref myst">cross_validate_model</span></a></p></li>
<li><p><a class="reference internal" href="#cross_validate_surv_model"><span class="xref myst">cross_validate_surv_model</span></a></p></li>
<li><p><a class="reference internal" href="#decision_curve_analysis"><span class="xref myst">decision_curve_analysis</span></a></p></li>
<li><p><a class="reference internal" href="#display_confusion_matrix"><span class="xref myst">display_confusion_matrix</span></a></p></li>
<li><p><a class="reference internal" href="#euclidean_distance"><span class="xref myst">euclidean_distance</span></a></p></li>
<li><p><a class="reference internal" href="#evaluate_and_plot_model"><span class="xref myst">evaluate_and_plot_model</span></a></p></li>
<li><p><a class="reference internal" href="#evaluate_params"><span class="xref myst">evaluate_params</span></a></p></li>
<li><p><a class="reference internal" href="#evaluate_params_kfold"><span class="xref myst">evaluate_params_kfold</span></a></p></li>
<li><p><a class="reference internal" href="#extract_mean"><span class="xref myst">extract_mean</span></a></p></li>
<li><p><a class="reference internal" href="#f_imp_shapboxplot"><span class="xref myst">f_imp_shapboxplot</span></a></p></li>
<li><p><a class="reference internal" href="#f_imp_shapboxplot_surv"><span class="xref myst">f_imp_shapboxplot_surv</span></a></p></li>
<li><p><a class="reference internal" href="#filter_columns"><span class="xref myst">filter_columns</span></a></p></li>
<li><p><a class="reference internal" href="#filter_rows"><span class="xref myst">filter_rows</span></a></p></li>
<li><p><a class="reference internal" href="#find_feature_clusters"><span class="xref myst">find_feature_clusters</span></a></p></li>
<li><p><a class="reference internal" href="#generate_subsample"><span class="xref myst">generate_subsample</span></a></p></li>
<li><p><a class="reference internal" href="#get_conda_environment"><span class="xref myst">get_conda_environment</span></a></p></li>
<li><p><a class="reference internal" href="#get_gpu_info"><span class="xref myst">get_gpu_info</span></a></p></li>
<li><p><a class="reference internal" href="#get_python_info"><span class="xref myst">get_python_info</span></a></p></li>
<li><p><a class="reference internal" href="#get_samples_per_class"><span class="xref myst">get_samples_per_class</span></a></p></li>
<li><p><a class="reference internal" href="#get_system_info"><span class="xref myst">get_system_info</span></a></p></li>
<li><p><a class="reference internal" href="#integrated_brier_score"><span class="xref myst">integrated_brier_score</span></a></p></li>
<li><p><a class="reference internal" href="#ipy_exit"><span class="xref myst">ipy_exit</span></a></p></li>
<li><p><a class="reference internal" href="#is_hyperparameter_tuning_suitable"><span class="xref myst">is_hyperparameter_tuning_suitable</span></a></p></li>
<li><p><a class="reference internal" href="#parallel_compute_shap_surv"><span class="xref myst">parallel_compute_shap_surv</span></a></p></li>
<li><p><a class="reference internal" href="#permute_feature_pairs"><span class="xref myst">permute_feature_pairs</span></a></p></li>
<li><p><a class="reference internal" href="#pfi_median_wrap"><span class="xref myst">PFI_median_wrap</span></a></p></li>
<li><p><a class="reference internal" href="#plot_confusion_matrix_for_clusters"><span class="xref myst">plot_confusion_matrix_for_clusters</span></a></p></li>
<li><p><a class="reference internal" href="#plot_pfi"><span class="xref myst">plot_PFI</span></a></p></li>
<li><p><a class="reference internal" href="#plot_samples_per_class_per_fold"><span class="xref myst">plot_samples_per_class_per_fold</span></a></p></li>
<li><p><a class="reference internal" href="#plot_survshap_detailed"><span class="xref myst">plot_survshap_detailed</span></a></p></li>
<li><p><a class="reference internal" href="#plot_tfi"><span class="xref myst">plot_TFI</span></a></p></li>
<li><p><a class="reference internal" href="#save_notebook"><span class="xref myst">save_notebook</span></a></p></li>
<li><p><a class="reference internal" href="#set_parameters"><span class="xref myst">set_parameters</span></a></p></li>
<li><p><a class="reference internal" href="#set_params_surv_models"><span class="xref myst">set_params_surv_models</span></a></p></li>
<li><p><a class="reference internal" href="#shap_summary_plot"><span class="xref myst">shap_summary_plot</span></a></p></li>
<li><p><a class="reference internal" href="#shorten_column_names"><span class="xref myst">shorten_column_names</span></a></p></li>
<li><p><a class="reference internal" href="#shorten_data_dictionary"><span class="xref myst">shorten_data_dictionary</span></a></p></li>
<li><p><a class="reference internal" href="#subsample_iqr_test"><span class="xref myst">subsample_iqr_test</span></a></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="del-self">
<h2><code class="docutils literal notranslate"><span class="pre">__del__(self)</span></code><a class="headerlink" href="#del-self" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> The <code class="docutils literal notranslate"><span class="pre">__del__</span></code> method closes the captured output buffer and restores it to its original value, ensuring proper cleanup when exiting.</p>
</section>
<hr class="docutils" />
<section id="init-self">
<h2><code class="docutils literal notranslate"><span class="pre">__init__(self)</span></code><a class="headerlink" href="#init-self" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> This defines the constructor (<code class="docutils literal notranslate"><span class="pre">__init__</span></code>) and destructor (<code class="docutils literal notranslate"><span class="pre">__del__</span></code>) methods for the <code class="docutils literal notranslate"><span class="pre">IpyExit</span></code> custom exception class.</p>
</section>
<hr class="docutils" />
<section id="adjust-hyperparameters-n-rows-n-cols">
<h2><code class="docutils literal notranslate"><span class="pre">adjust_hyperparameters(n_rows,</span> <span class="pre">n_cols)</span></code><a class="headerlink" href="#adjust-hyperparameters-n-rows-n-cols" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Returns a dictionary of hyperparameter distributions for various machine learning models.</p>
</section>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>n_rows (int): The number of rows in the dataset.
n_cols (int): The number of columns in the dataset.
</pre></div>
</div>
</section>
<section id="returns">
<h2>Returns<a class="headerlink" href="#returns" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dict: A dictionary containing the following keys:
    - &#39;adjusted_rf_param_dist&#39;: Hyperparameters for Random Forest Classifier.
    - &#39;adjusted_lgbm_param_dist&#39;: Hyperparameters for LightGBM Classifier.
    - &#39;adjusted_hgbc_param_dist&#39;: Hyperparameters for Histogram-Based Gradient Boosting Classifier.
    - &#39;adjusted_cb_param_dist&#39;: Hyperparameters for CatBoost Classifier.
    - &#39;adjusted_lr_param_dist&#39;: Hyperparameters for Logistic Regression.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="adjust-hyperparameters-surv-models-n-rows">
<h2><code class="docutils literal notranslate"><span class="pre">adjust_hyperparameters_surv_models(n_rows)</span></code><a class="headerlink" href="#adjust-hyperparameters-surv-models-n-rows" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Returns a dictionary of hyperparameter distributions for various survival models.</p>
</section>
<section id="id1">
<h2>Parameters<a class="headerlink" href="#id1" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>n_rows (int): The number of rows in the dataset.
</pre></div>
</div>
</section>
<section id="id2">
<h2>Returns<a class="headerlink" href="#id2" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dict: A dictionary containing the following keys:
    - &#39;RSF_param_dist&#39;: Hyperparameters for Random Forest Classifier.
    - &#39;CoxPH_param_dist&#39;: Hyperparameters for Cox Proportional Hazards Model.
    - &#39;Coxnet_param_dist&#39;: Hyperparameters for CoxnetSurvivalAnalysis.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="aggregate-shap-values-with-base-survshaps-x-test-surv-aggregation-mean-abs">
<h2><code class="docutils literal notranslate"><span class="pre">aggregate_shap_values_with_base(survshaps,</span> <span class="pre">X_test_surv,</span> <span class="pre">aggregation='mean_abs')</span></code><a class="headerlink" href="#aggregate-shap-values-with-base-survshaps-x-test-surv-aggregation-mean-abs" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Aggregate SHAP values from a survival model.</p>
</section>
<section id="id3">
<h2>Parameters<a class="headerlink" href="#id3" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>survshaps (list): A list of Shapely objects containing survival model results.
X_test_surv (pd.DataFrame): The test set used for feature selection and model evaluation.
aggregation (str, optional): The method to use for aggregating SHAP values. Can be &#39;mean_abs&#39;, &#39;sum&#39;, or &#39;mean&#39;. Defaults to &#39;mean_abs&#39;.
</pre></div>
</div>
</section>
<section id="id4">
<h2>Returns<a class="headerlink" href="#id4" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>tuple: A tuple containing two arrays:
    - shap_values (np.ndarray): An array of shape (n_samples, n_features) where each row represents the aggregated SHAP value for a sample.
    - base_values (np.ndarray): An array of shape (n_samples,) where each element is the base value for a sample.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="bootstrap-sample-data-n-samples">
<h2><code class="docutils literal notranslate"><span class="pre">bootstrap_sample(data,</span> <span class="pre">n_samples)</span></code><a class="headerlink" href="#bootstrap-sample-data-n-samples" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Perform bootstrap sampling on the input data.</p>
</section>
<section id="id5">
<h2>Parameters:<a class="headerlink" href="#id5" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>data (array-like): Input data to be sampled.</p></li>
<li><p>n_samples (int): Number of samples to generate.</p></li>
</ul>
</section>
<section id="id6">
<h2>Returns<a class="headerlink" href="#id6" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>indices (numpy array): Indices of the original data used for bootstrapping.</p></li>
<li><p>resampled_data (array-like): Resampled data with shape (n_samples, len(data)).</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="calculate-biserial-corr-subsample-outcome-var">
<h2><code class="docutils literal notranslate"><span class="pre">calculate_biserial_corr(subsample,</span> <span class="pre">outcome_var)</span></code><a class="headerlink" href="#calculate-biserial-corr-subsample-outcome-var" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Calculates point-biserial correlation for each variable in the subsample against the target.</p>
</section>
<section id="id7">
<h2>Parameters<a class="headerlink" href="#id7" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>subsample (DataFrame): Subsample of the dataset.
outcome_var (str): Name of the target variable.
</pre></div>
</div>
</section>
<section id="id8">
<h2>Returns<a class="headerlink" href="#id8" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>corr_values (dict): Dictionary containing correlation values for each variable.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="calculate-confidence-interval-metric-values-alpha-0-95">
<h2><code class="docutils literal notranslate"><span class="pre">calculate_confidence_interval(metric_values,</span> <span class="pre">alpha=0.95)</span></code><a class="headerlink" href="#calculate-confidence-interval-metric-values-alpha-0-95" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Calculate the confidence interval for the given metric values.</p>
</section>
<section id="id9">
<h2>Parameters:<a class="headerlink" href="#id9" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>metric_values (array-like): Input metric values.</p></li>
<li><p>alpha (float, optional): Confidence level. Defaults to 0.95.</p></li>
</ul>
</section>
<section id="id10">
<h2>Returns<a class="headerlink" href="#id10" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>lower_bound (float or numpy array): Lower bound of the confidence interval.</p></li>
<li><p>upper_bound (float or numpy array): Upper bound of the confidence interval.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="calculate-metrics-y-true-y-pred-y-pred-proba">
<h2><code class="docutils literal notranslate"><span class="pre">calculate_metrics(y_true,</span> <span class="pre">y_pred,</span> <span class="pre">y_pred_proba)</span></code><a class="headerlink" href="#calculate-metrics-y-true-y-pred-y-pred-proba" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Calculates various evaluation metrics for binary classification models.</p>
</section>
<section id="id11">
<h2>Parameters<a class="headerlink" href="#id11" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>y_true (array-like): True labels.
y_pred (array-like): Predicted labels.
y_pred_proba (array-like): Predicted probabilities of positive outcomes.
</pre></div>
</div>
</section>
<section id="id12">
<h2>Returns<a class="headerlink" href="#id12" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dict: Dictionary containing the following evaluation metrics:
    - PPV (Positive Predictive Value)
    - NPV (Negative Predictive Value)
    - Sensitivity (True Positive Rate)
    - Specificity (True Negative Rate)
    - Balanced Accuracy
    - Matthews Correlation Coefficient (MCC)
    - Receiver Operating Characteristic AUC Score (ROCAUC)
    - Precision-Recall AUC Score (PRAUC)
    - Brier Score
    - F1 Score
</pre></div>
</div>
<p>Notes:
The evaluation metrics are calculated based on the true labels, predicted labels, and predicted probabilities.</p>
</section>
<hr class="docutils" />
<section id="calculate-missingness-data-output-file-missingness-report-xlsx">
<h2><code class="docutils literal notranslate"><span class="pre">calculate_missingness(data,</span> <span class="pre">output_file='missingness_report.xlsx')</span></code><a class="headerlink" href="#calculate-missingness-data-output-file-missingness-report-xlsx" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Reports missingness in both categorical and continuous variables and saves the results to an Excel file.</p>
<p>This function calculates the percentage of missing values for each column in the input data,
corrects these percentages for categorical columns where missing is a valid category,
and computes the mean and standard deviation of the missingness across all columns.</p>
</section>
<section id="id13">
<h2>Parameters<a class="headerlink" href="#id13" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>data (pandas.DataFrame): The input data containing both categorical and continuous variables.
output_file (str, optional): The file path to save the results. Defaults to &#39;missingness_report.xlsx&#39;.
</pre></div>
</div>
</section>
<section id="id14">
<h2>Returns<a class="headerlink" href="#id14" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>None
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="calculate-mutual-info-subsample-outcome-var">
<h2><code class="docutils literal notranslate"><span class="pre">calculate_mutual_info(subsample,</span> <span class="pre">outcome_var)</span></code><a class="headerlink" href="#calculate-mutual-info-subsample-outcome-var" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Calculates mutual information between each feature in the subsample and the target variable.</p>
</section>
<section id="id15">
<h2>Parameters<a class="headerlink" href="#id15" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>subsample (DataFrame): Subsample of the dataset.
outcome_var (str): Name of the target variable.
</pre></div>
</div>
</section>
<section id="id16">
<h2>Returns<a class="headerlink" href="#id16" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mi_values (dict): Dictionary containing mutual information values for each feature.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="calculate-surv-metrics-y-true-model-x-test-survival-train-survival-test">
<h2><code class="docutils literal notranslate"><span class="pre">calculate_surv_metrics(y_true,</span> <span class="pre">model,</span> <span class="pre">X_test,</span> <span class="pre">survival_train,</span> <span class="pre">survival_test)</span></code><a class="headerlink" href="#calculate-surv-metrics-y-true-model-x-test-survival-train-survival-test" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Calculate and compute key metrics for survival prediction models.</p>
<p>This function takes in several inputs:
- y_true: The true event labels (0 or 1) and corresponding times.
- model: A trained survival prediction model.
- X_test: Test feature data used to evaluate the models performance.
- survival_train: Training dataset containing event indicators, times, and predicted survival functions.
- survival_test: Testing dataset containing event indicators, times, and predicted survival functions.</p>
<p>The function computes the following metrics:
- Concordance Index (CI): A measure of model accuracy that ranks predictions based on their performance.
- Integrated Brier Score (IBS): An alternative measure of predictive performance that takes into account both false positives and false negatives.</p>
<p>Parameters:
y_true (pandas DataFrame): True event labels and corresponding times.
model (scikit-learn estimator): Trained survival prediction model.
X_test (numpy array or pandas DataFrame): Test feature data used to evaluate the models performance.
survival_train (pandas DataFrame): Training dataset containing event indicators, times, and predicted survival functions.
survival_test (pandas DataFrame): Testing dataset containing event indicators, times, and predicted survival functions.</p>
</section>
<section id="id17">
<h2>Returns<a class="headerlink" href="#id17" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dict: A dictionary containing the Concordance Index (CI) and Integrated Brier Score (IBS).
</pre></div>
</div>
<p>Raises:
ValueError: If predictions array is empty or invalid.</p>
</section>
<hr class="docutils" />
<section id="categorical-shap-plot-shap-values-data-top-n-10-jitter-0-1">
<h2><code class="docutils literal notranslate"><span class="pre">categorical_shap_plot(shap_values,</span> <span class="pre">data,</span> <span class="pre">top_n=10,</span> <span class="pre">jitter=0.1)</span></code><a class="headerlink" href="#categorical-shap-plot-shap-values-data-top-n-10-jitter-0-1" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> This function creates a plot of SHAP values for the top N features in a dataset, where categorical features are displayed as scatter plots with different colors and numerical features are displayed as individual points. The plot includes a colorbar for numerical features and labels for categorical features.</p>
</section>
<section id="id18">
<h2>Parameters:<a class="headerlink" href="#id18" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>shap_values (numpy array): Matrix of SHAP values to be plotted.
data (pandas DataFrame): Dataset containing feature names and values.
top_n (int, optional): Number of top features to include in the plot. Defaults to 10.
jitter (float, optional): Jitter value for scatter plots. Defaults to 0.1.
</pre></div>
</div>
</section>
<section id="id19">
<h2>Returns<a class="headerlink" href="#id19" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fig: Matplotlib figure object containing the SHAP plot.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="check-categorical-difference-train-data-test-data">
<h2><code class="docutils literal notranslate"><span class="pre">check_categorical_difference(train_data,</span> <span class="pre">test_data)</span></code><a class="headerlink" href="#check-categorical-difference-train-data-test-data" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Compares categorical differences between training and testing datasets,
using the Chi-square test to determine if there are significant differences in distribution.</p>
</section>
<section id="id20">
<h2>Parameters<a class="headerlink" href="#id20" title="Link to this heading">#</a></h2>
<p>train_data: The original training data.
test_data: The test set obtained from train_test_split.</p>
</section>
<section id="id21">
<h2>Returns<a class="headerlink" href="#id21" title="Link to this heading">#</a></h2>
<p>A dictionary containing the statistical difference results for each categorical variable.</p>
</section>
<hr class="docutils" />
<section id="check-numerical-difference-train-data-test-data">
<h2><code class="docutils literal notranslate"><span class="pre">check_numerical_difference(train_data,</span> <span class="pre">test_data)</span></code><a class="headerlink" href="#check-numerical-difference-train-data-test-data" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> check_numerical_difference compares statistical differences between numerical variables in training and testing datasets.</p>
<p>This function takes two dataframes (train_data and test_data) as input, identifies the numerical columns, and computes the Mann-Whitney U-statistic to determine if there are significant differences between the distributions of these numerical variables in the training and testing datasets. It returns a dictionary containing the results for each identified variable, including the statistic and p-value.</p>
</section>
<section id="id22">
<h2>Parameters<a class="headerlink" href="#id22" title="Link to this heading">#</a></h2>
<p>train_data: The original training data.
test_data: The test set obtained from train_test_split.</p>
</section>
<section id="id23">
<h2>Returns<a class="headerlink" href="#id23" title="Link to this heading">#</a></h2>
<p>A dictionary containing the statistical difference results for each numerical variable.</p>
</section>
<hr class="docutils" />
<section id="combined-metric-y-true-y-pred-proba">
<h2><code class="docutils literal notranslate"><span class="pre">combined_metric(y_true,</span> <span class="pre">y_pred_proba)</span></code><a class="headerlink" href="#combined-metric-y-true-y-pred-proba" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Calculates the combined custom metric for hyperparameter tuning, which is the mean of
ROCAUC (Receiver Operating Characteristic Area Under Curve) and PRAUC (Precision-Recall AUC).</p>
<p>This metric combines both the classification accuracy (ROCAUC) and precision (PRAUC) to
provide a balanced evaluation of model performance, particularly useful for binary classification tasks.</p>
</section>
<section id="id24">
<h2>Parameters<a class="headerlink" href="#id24" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>y_true (array-like): True labels for which each sample was predicted.
y_pred_proba (array-like): Predicted probabilities for each sample.
</pre></div>
</div>
</section>
<section id="id25">
<h2>Returns<a class="headerlink" href="#id25" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>float: The combined custom metric value, representing the mean of ROCAUC and PRAUC.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="conformal-p-value-prob-calibration-scores-true-label">
<h2><code class="docutils literal notranslate"><span class="pre">conformal_p_value(prob,</span> <span class="pre">calibration_scores,</span> <span class="pre">true_label)</span></code><a class="headerlink" href="#conformal-p-value-prob-calibration-scores-true-label" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Calculates the p-value for conformal prediction using the calibration scores.</p>
<p>This function estimates the proportion of calibration nonconformity scores that are greater than or equal to
the test samples nonconformity score. The p-value represents the probability that the null hypothesis of
no difference between the distribution of labels and the predicted probabilities is rejected.</p>
</section>
<section id="id26">
<h2>Parameters<a class="headerlink" href="#id26" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>prob (float): Predicted probability for the test sample.
calibration_scores (array-like): Calibration scores from a conformal prediction model.
true_label (int): True label of the test sample.
</pre></div>
</div>
</section>
<section id="id27">
<h2>Returns<a class="headerlink" href="#id27" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>float: The p-value, representing the proportion of calibration nonconformity scores greater than or equal to 
    the test sample&#39;s nonconformity score.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="cost-sensitive-net-benefit-tp-fp-threshold-n-w-tp-1-w-fp-1">
<h2><code class="docutils literal notranslate"><span class="pre">cost_sensitive_net_benefit(tp,</span> <span class="pre">fp,</span> <span class="pre">threshold,</span> <span class="pre">N,</span> <span class="pre">w_tp=1,</span> <span class="pre">w_fp=1)</span></code><a class="headerlink" href="#cost-sensitive-net-benefit-tp-fp-threshold-n-w-tp-1-w-fp-1" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Calculates the net benefit of a classification model under a given probability threshold.</p>
<p>The net benefit is calculated as the weighted sum of the positive and negative classes,
where the weights are based on the prior probabilities of the classes. This metric allows for
cost-sensitive comparison between different models, taking into account the costs associated with
false positives and false negatives.</p>
</section>
<section id="id28">
<h2>Parameters<a class="headerlink" href="#id28" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>tp (int): True positives in the current test set.
fp (int): False positives in the current test set.
threshold (float): Probability threshold used to determine predicted positive classes.
N (int): Total number of samples in the test set.
w_tp (float, optional): Weight assigned to true positives. Defaults to 1.
w_fp (float, optional): Weight assigned to false positives. Defaults to 1.
</pre></div>
</div>
</section>
<section id="id29">
<h2>Returns<a class="headerlink" href="#id29" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>float: Net benefit of the model under the given threshold.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="create-summary-table-dataframe-dataset-name">
<h2><code class="docutils literal notranslate"><span class="pre">create_summary_table(dataframe,</span> <span class="pre">dataset_name)</span></code><a class="headerlink" href="#create-summary-table-dataframe-dataset-name" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Creates a summary table for a single dataset.</p>
<p>This function generates a table that summarizes key statistics about each variable in the dataset,
including numerical variables (median and quartiles) and categorical variables (categories, counts, and percentages).
Additionally, it includes information on missing values and adds a column for the dataset name.</p>
</section>
<section id="id30">
<h2>Parameters<a class="headerlink" href="#id30" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dataframe (pd.DataFrame): The input DataFrame to generate summary statistics from.
dataset_name (str): The name of the dataset being summarized.
</pre></div>
</div>
</section>
<section id="id31">
<h2>Returns<a class="headerlink" href="#id31" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pd.DataFrame: A new DataFrame containing the summary statistics.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="cross-validate-model-model-class-x-y-sample-weights-none-n-splits-cv-folds-random-state-seed-measures-none-use-default-threshold-false">
<h2><code class="docutils literal notranslate"><span class="pre">cross_validate_model(model_class,</span> <span class="pre">X,</span> <span class="pre">y,</span> <span class="pre">sample_weights=None,</span> <span class="pre">n_splits=cv_folds,</span> <span class="pre">random_state=SEED,</span> <span class="pre">measures=None,</span> <span class="pre">use_default_threshold=False)</span></code><a class="headerlink" href="#cross-validate-model-model-class-x-y-sample-weights-none-n-splits-cv-folds-random-state-seed-measures-none-use-default-threshold-false" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Perform k-fold cross-validation and evaluate the model.</p>
</section>
<section id="id32">
<h2>Parameters:<a class="headerlink" href="#id32" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>X (array-like): Feature data.
y (array-like): Target labels.
model: Trained model instance.
use_default_threshold (bool, optional): Use default threshold (0.5) for classification. Defaults to True.
</pre></div>
</div>
</section>
<section id="id33">
<h2>Returns<a class="headerlink" href="#id33" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>tuple: Fold results, aggregated results table, optimal threshold, feature importance lists, and SHAP values list.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="cross-validate-surv-model-model-class-x-y-n-splits-cv-folds-random-state-seed-measures-none-hp-tuning-false">
<h2><code class="docutils literal notranslate"><span class="pre">cross_validate_surv_model(model_class,</span> <span class="pre">X,</span> <span class="pre">y,</span> <span class="pre">n_splits=cv_folds,</span> <span class="pre">random_state=SEED,</span> <span class="pre">measures=None,</span> <span class="pre">hp_tuning=False)</span></code><a class="headerlink" href="#cross-validate-surv-model-model-class-x-y-n-splits-cv-folds-random-state-seed-measures-none-hp-tuning-false" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> This function performs cross-validation on a specified survival model class, evaluating its performance on a dataset. It allows users to tune hyperparameters using random search or grid search.</p>
<section id="function-signature">
<h3>Function Signature<a class="headerlink" href="#function-signature" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">cross_validate_surv_model(model_class:</span> <span class="pre">str,</span> <span class="pre">X:</span> <span class="pre">pd.DataFrame,</span> <span class="pre">y:</span> <span class="pre">np.ndarray,</span> <span class="pre">n_splits:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">cv_folds,</span> <span class="pre">random_state:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">SEED,</span> <span class="pre">measures:</span> <span class="pre">list[str]</span> <span class="pre">=</span> <span class="pre">['CI',</span> <span class="pre">'IBS'],</span> <span class="pre">hp_tuning:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False)</span> <span class="pre">-&gt;</span> <span class="pre">pd.DataFrame</span></code></p>
</section>
<section id="id34">
<h3>Parameters<a class="headerlink" href="#id34" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">model_class</span></code>: The class of the survival model to be used for cross-validation. Supported models include <code class="docutils literal notranslate"><span class="pre">RandomSurvivalForest</span></code>, <code class="docutils literal notranslate"><span class="pre">CoxPHSurvivalAnalysis</span></code>, and <code class="docutils literal notranslate"><span class="pre">CoxnetSurvivalAnalysis</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">X</span></code>: The feature data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">y</span></code>: The event data, where each row contains an event and a time.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_splits</span></code>: The number of folds for cross-validation. Defaults to <code class="docutils literal notranslate"><span class="pre">cv_folds</span></code> if not specified.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">random_state</span></code>: The random seed used for shuffling and splitting the data. Defaults to <code class="docutils literal notranslate"><span class="pre">SEED</span></code> if not specified.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">measures</span></code>: A list of metrics to be evaluated during cross-validation. Defaults to [CI, IBS] if not specified.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hp_tuning</span></code>: Whether to perform hyperparameter tuning using random search or grid search.</p></li>
</ul>
</section>
<section id="function-behavior">
<h3>Function Behavior<a class="headerlink" href="#function-behavior" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>The function performs KFold cross-validation on the dataset, creating a new DataFrame for each fold to store the results of the model evaluation.</p></li>
<li><p>For each fold, it converts the data back to its original structured format and prepares the survival data for calculating metrics.</p></li>
<li><p>If hyperparameter tuning is enabled, it uses RandomizedSearchCV to perform random search or grid search on the specified model class and parameter distribution.</p></li>
<li><p>It then fits the model with the trained parameters and predicts the event times for the test set.</p></li>
<li><p>After obtaining the predicted event times, it calculates the evaluation metrics using <code class="docutils literal notranslate"><span class="pre">calculate_surv_metrics</span></code>.</p></li>
<li><p>The function aggregates the results from each fold by calculating the mean and standard deviation of each metric.</p></li>
<li><p>Finally, it displays the aggregated results in a table format.</p></li>
</ol>
</section>
<section id="id35">
<h3>Returns<a class="headerlink" href="#id35" title="Link to this heading">#</a></h3>
<p>The function returns a DataFrame containing the aggregated results of the model evaluations for each metric specified in the <code class="docutils literal notranslate"><span class="pre">measures</span></code> list.</p>
</section>
</section>
<hr class="docutils" />
<section id="decision-curve-analysis-pred-probs-selected-model-pred-probs-alternative-model-rand-pred-probs-w-tp-1-w-fp-1">
<h2><code class="docutils literal notranslate"><span class="pre">decision_curve_analysis(pred_probs_selected_model,</span> <span class="pre">pred_probs_alternative_model,</span> <span class="pre">rand_pred_probs,</span> <span class="pre">w_tp=1,</span> <span class="pre">w_fp=1)</span></code><a class="headerlink" href="#decision-curve-analysis-pred-probs-selected-model-pred-probs-alternative-model-rand-pred-probs-w-tp-1-w-fp-1" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Performs cost-sensitive decision curve analysis on two models.</p>
<p>The analysis plots the net benefit of each model under different probability thresholds
and allows for comparison between the two models. The plot also includes a reference line
representing the default threshold used in many machine learning applications.</p>
</section>
<section id="id36">
<h2>Parameters<a class="headerlink" href="#id36" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pred_probs_selected_model (array-like): Predicted probabilities of positive classes for the first model.
pred_probs_alternative_model (array-like): Predicted probabilities of positive classes for the second model.
rand_pred_probs (array-like): Randomly generated predicted probabilities for a third set of models.
</pre></div>
</div>
</section>
<section id="id37">
<h2>Returns<a class="headerlink" href="#id37" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>None
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="display-confusion-matrix-y-true-y-pred-labels">
<h2><code class="docutils literal notranslate"><span class="pre">display_confusion_matrix(y_true,</span> <span class="pre">y_pred,</span> <span class="pre">labels)</span></code><a class="headerlink" href="#display-confusion-matrix-y-true-y-pred-labels" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Displays a confusion matrix for model performance evaluation.</p>
</section>
<section id="id38">
<h2>Parameters<a class="headerlink" href="#id38" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>y_true (np.ndarray): Ground truth labels.
y_pred (np.ndarray): Predicted labels.
labels (list or tuple): List of unique class labels in the data.
</pre></div>
</div>
</section>
<section id="id39">
<h2>Returns<a class="headerlink" href="#id39" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>None: The function modifies the specified axes object and displays the plot.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="euclidean-distance-x-y">
<h2><code class="docutils literal notranslate"><span class="pre">euclidean_distance(x,</span> <span class="pre">y)</span></code><a class="headerlink" href="#euclidean-distance-x-y" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Calculates the Euclidean distance between two vectors.</p>
<p>The Euclidean distance is a measure of the straight-line distance between two points in n-dimensional space.
It is defined as the square root of the sum of the squared differences between corresponding elements in the input vectors.</p>
</section>
<section id="id40">
<h2>Parameters<a class="headerlink" href="#id40" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>x (numpy array): The first vector.
y (numpy array): The second vector.
</pre></div>
</div>
</section>
<section id="id41">
<h2>Returns<a class="headerlink" href="#id41" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>float: The Euclidean distance between the two input vectors.
</pre></div>
</div>
<p>Note:
This function assumes that the input vectors are of equal length. If they are not, an error will be raised.</p>
</section>
<hr class="docutils" />
<section id="evaluate-and-plot-model-model-testset-y-test-filename-class-labels-class-labels-display-threshold-0-5-bootstrap-samples-1000-min-positive-instances-1">
<h2><code class="docutils literal notranslate"><span class="pre">evaluate_and_plot_model(model,</span> <span class="pre">testset,</span> <span class="pre">y_test,</span> <span class="pre">filename,</span> <span class="pre">class_labels=class_labels_display,</span> <span class="pre">threshold=0.5,</span> <span class="pre">bootstrap_samples=1000,</span> <span class="pre">min_positive_instances=1)</span></code><a class="headerlink" href="#evaluate-and-plot-model-model-testset-y-test-filename-class-labels-class-labels-display-threshold-0-5-bootstrap-samples-1000-min-positive-instances-1" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Calculates and visualizes model performance using ROC curve, PR curve, and confusion matrix.</p>
</section>
<section id="id42">
<h2>Parameters<a class="headerlink" href="#id42" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>y_test (np.ndarray): Ground truth labels for the test dataset.
predictions_class (np.ndarray): Predicted labels for the test dataset.
class_labels_display (list or tuple): List of unique class labels in the data for display purposes.
threshold (float): Threshold value for model evaluation.
filename (str): Output file name for visualization.
</pre></div>
</div>
</section>
<section id="id43">
<h2>Returns<a class="headerlink" href="#id43" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>results_df (DataFrame): DataFrame containing model performance metrics.
missclassified_samples (list): List of indices of samples that were misclassified by the model.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="evaluate-params-n-epochs-max-complexity">
<h2><code class="docutils literal notranslate"><span class="pre">evaluate_params(n_epochs,</span> <span class="pre">max_complexity)</span></code><a class="headerlink" href="#evaluate-params-n-epochs-max-complexity" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Evaluate a composite model by tuning hyperparameters using the Feyn framework.</p>
<p>Parameters:
n_epochs (int): Number of epochs for training the model.
max_complexity (int): Maximum complexity of the model.</p>
</section>
<section id="id44">
<h2>Returns<a class="headerlink" href="#id44" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>tuple: The composite score (mean of AUC and AP) and the best parameters used to achieve this score.
</pre></div>
</div>
<p>Notes:
This function uses the Feyn framework to perform a hyperparameter tuning search.
It assumes that <code class="docutils literal notranslate"><span class="pre">mydata_imputed_nocv</span></code>, <code class="docutils literal notranslate"><span class="pre">outcome_var</span></code>, <code class="docutils literal notranslate"><span class="pre">y_train</span></code>, <code class="docutils literal notranslate"><span class="pre">stypes</span></code>, <code class="docutils literal notranslate"><span class="pre">sample_weights</span></code> are defined elsewhere in the code.
The <code class="docutils literal notranslate"><span class="pre">random_seed</span></code> parameter is set to <code class="docutils literal notranslate"><span class="pre">SEED</span></code> for reproducibility.</p>
<p>Steps:
1. Initialize a QLattice object with a random seed.
2. Use <code class="docutils literal notranslate"><span class="pre">auto_run</span></code> to perform a hyperparameter tuning search.
- The model is run on the training data (<code class="docutils literal notranslate"><span class="pre">mydata_imputed_nocv</span></code>) for <code class="docutils literal notranslate"><span class="pre">n_epochs</span></code> epochs.
- The criterion used for hyperparameter selection is AIC (Akaike information criterion).
- The loss function used for classification is binary cross-entropy.
3. Select the best model from the set of models generated by <code class="docutils literal notranslate"><span class="pre">auto_run</span></code>.
4. Use this best model to make predictions on the training data.
5. Calculate the composite score, which is the mean of AUC (Receiver Operating Characteristic) and AP (Area Under the Precision-Recall Curve).</p>
</section>
<hr class="docutils" />
<section id="evaluate-params-kfold-n-epochs-max-complexity">
<h2><code class="docutils literal notranslate"><span class="pre">evaluate_params_kfold(n_epochs,</span> <span class="pre">max_complexity)</span></code><a class="headerlink" href="#evaluate-params-kfold-n-epochs-max-complexity" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Evaluate a QLattice model for given hyperparameters.</p>
</section>
<section id="id45">
<h2>Parameters:<a class="headerlink" href="#id45" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>n_epochs (int): The number of epochs used for training.
max_complexity (int): The maximum complexity of the model.
</pre></div>
</div>
</section>
<section id="id46">
<h2>Returns<a class="headerlink" href="#id46" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>QL_composite_score (float): The composite score of the model.
params (dict): The hyperparameters used to achieve this score.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="extract-mean-value">
<h2><code class="docutils literal notranslate"><span class="pre">extract_mean(value)</span></code><a class="headerlink" href="#extract-mean-value" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Extract the mean value from a string.</p>
<p>This function uses regular expressions to search for a decimal number in the input string.
If a match is found, it returns the extracted value as a float. Otherwise, it returns None.</p>
<p>Parameters:
value (str): The input string to extract the mean value from.</p>
</section>
<section id="id47">
<h2>Returns<a class="headerlink" href="#id47" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>float or None: The extracted mean value as a float, or None if no match is found.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="f-imp-shapboxplot-shap-values-x-test-ohe-x-test-selected-model-data-dictionary-num-features-20-num-subsamples-1000-random-seed-none-apply-threshold-false">
<h2><code class="docutils literal notranslate"><span class="pre">f_imp_shapboxplot(shap_values,</span> <span class="pre">X_test_OHE,</span> <span class="pre">X_test,</span> <span class="pre">selected_model,</span> <span class="pre">data_dictionary,</span> <span class="pre">num_features=20,</span> <span class="pre">num_subsamples=1000,</span> <span class="pre">random_seed=None,</span> <span class="pre">apply_threshold=False)</span></code><a class="headerlink" href="#f-imp-shapboxplot-shap-values-x-test-ohe-x-test-selected-model-data-dictionary-num-features-20-num-subsamples-1000-random-seed-none-apply-threshold-false" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Plot the SHAP values for the top N most important features.</p>
<p>This function uses the SHAP (SHapley Additive exPlanations) method to explain the contribution of each feature to a models predictions.
It plots a boxplot of the absolute SHAP values for the top N features, with colors indicating significance based on the IQR crossing test.</p>
<p>Parameters:
shap_values (np.array): The SHAP values for the input data.
X_test_OHE (pd.DataFrame): The one-hot encoded test data.
X_test (pd.DataFrame): The raw test data.
selected_model (class): The model used to select the top N most important features.
data_dictionary (dict): A dictionary mapping feature names to their corresponding indices in the dataset.
num_features (int, optional): The number of top features to plot. Defaults to 20.
num_subsamples (int, optional): The number of subsamples to use for the IQR crossing test. Defaults to 1000.
random_seed (int, optional): The seed used for randomization. Defaults to None.
apply_threshold (bool, optional): Whether to apply a threshold to the sum of SHAP values before performing the IQR crossing test. Defaults to False.</p>
</section>
<section id="id48">
<h2>Returns<a class="headerlink" href="#id48" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pd.DataFrame: A DataFrame containing the top N most important features, including their median absolute SHAP value, lower and upper quantiles, and subsample proportion crossing zero.
plt: The plot of the boxplot of absolute SHAP values for the top N features.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="f-imp-shapboxplot-surv-shap-values-x-test-num-features-20-num-subsamples-1000-random-seed-none-apply-threshold-false">
<h2><code class="docutils literal notranslate"><span class="pre">f_imp_shapboxplot_surv(shap_values,</span> <span class="pre">X_test,</span> <span class="pre">num_features=20,</span> <span class="pre">num_subsamples=1000,</span> <span class="pre">random_seed=None,</span> <span class="pre">apply_threshold=False)</span></code><a class="headerlink" href="#f-imp-shapboxplot-surv-shap-values-x-test-num-features-20-num-subsamples-1000-random-seed-none-apply-threshold-false" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> The <code class="docutils literal notranslate"><span class="pre">f_imp_shapboxplot_surv</span></code> function generates an importance plot for SHAP (SHapley Additive exPlanations) values to identify the most influential features in a model. The function takes in SHAP value arrays, test data, and various parameters to customize the plot.</p>
<p>Functionality:</p>
<ol class="arabic simple">
<li><p>Compute median, lower quantile, and upper quantile of absolute SHAP values for all features.</p></li>
<li><p>Sort features by median absolute SHAP value in descending order and select the top N most important features (default N=20).</p></li>
<li><p>Perform an IQR crossing test with subsamples to determine feature significance.</p></li>
<li><p>Mark significant features with an asterisk based on the IQR crossing test results.</p></li>
<li><p>Plot a boxplot of the distribution of absolute SHAP values for the selected features, using different colors for significant and non-significant features.</p></li>
</ol>
</section>
<section id="id49">
<h2>Parameters:<a class="headerlink" href="#id49" title="Link to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">shap_values</span></code>: array of SHAP value arrays
<code class="docutils literal notranslate"><span class="pre">X_test</span></code>: test data
<code class="docutils literal notranslate"><span class="pre">num_features</span></code>: number of top features to select (default=20)
<code class="docutils literal notranslate"><span class="pre">num_subsamples</span></code>: number of subsamples for the IQR crossing test (default=1000)
<code class="docutils literal notranslate"><span class="pre">random_seed</span></code>: random seed for reproducibility (optional)
<code class="docutils literal notranslate"><span class="pre">apply_threshold</span></code>: apply threshold to SHAP values (default=False)</p>
</section>
<section id="id50">
<h2>Returns<a class="headerlink" href="#id50" title="Link to this heading">#</a></h2>
<p>A pandas DataFrame containing the top N most important features, including their median and quantile SHAP values, subsample proportion crossing zero, and significance status.
A matplotlib plot of the boxplot showing the distribution of absolute SHAP values for the selected features.</p>
</section>
<hr class="docutils" />
<section id="filter-columns-df-threshold-0-9">
<h2><code class="docutils literal notranslate"><span class="pre">filter_columns(df,</span> <span class="pre">threshold=0.9)</span></code><a class="headerlink" href="#filter-columns-df-threshold-0-9" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Filter out columns with missingness greater than the threshold.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">filter_columns</span></code> function filters out columns in a DataFrame based on the presence of missing values. It calculates the mean missingness ratio for each column, sets a threshold to determine which columns to keep, and returns a new DataFrame with only the specified columns.</p>
<ol class="arabic simple">
<li><p>Calculate the mean number of missing values per column.</p></li>
<li><p>Identify columns where the mean missingness is less than or equal to the specified threshold (default=0.90).</p></li>
<li><p>Return a new DataFrame containing only the selected columns, effectively removing columns with high missingness rates.</p></li>
</ol>
</section>
<section id="id51">
<h2>Parameters<a class="headerlink" href="#id51" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">df</span></code>: input DataFrame</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">threshold</span></code> (optional): maximum allowed missingness ratio (default=0.90)</p></li>
</ul>
</section>
<section id="id52">
<h2>Returns<a class="headerlink" href="#id52" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>A new DataFrame with filtered columns.</p></li>
<li><p>The number of remaining columns is less than or equal to the input DataFrames original column count by at least 1.</p></li>
</ul>
<p>Note: This function does not modify the original DataFrame, but instead returns a new one with the filtered columns.</p>
</section>
<hr class="docutils" />
<section id="filter-rows-df-threshold-0-9">
<h2><code class="docutils literal notranslate"><span class="pre">filter_rows(df,</span> <span class="pre">threshold=0.9)</span></code><a class="headerlink" href="#filter-rows-df-threshold-0-9" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Filter out rows with missingness greater than the threshold.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">filter_rows</span></code> function filters out rows in a DataFrame based on the presence of missing values. It calculates the mean number of missing values per row, sets a threshold to determine which rows to keep, and returns a new DataFrame with only the specified rows.</p>
<ol class="arabic simple">
<li><p>Calculate the mean number of missing values per row.</p></li>
<li><p>Identify rows where the mean missingness is less than or equal to the specified threshold (default=0.90).</p></li>
<li><p>Return a new DataFrame containing only the selected rows, effectively removing rows with high missingness rates.</p></li>
</ol>
</section>
<section id="id53">
<h2>Parameters<a class="headerlink" href="#id53" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">df</span></code>: input DataFrame</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">threshold</span></code> (optional): maximum allowed missingness ratio (default=0.90)</p></li>
</ul>
</section>
<section id="id54">
<h2>Returns<a class="headerlink" href="#id54" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>A new DataFrame with filtered rows.</p></li>
<li><p>The number of remaining rows is less than or equal to the original DataFrames row count by at least 1.</p></li>
</ul>
<p>Note: This function does not modify the original DataFrame, but instead returns a new one with the filtered rows.</p>
</section>
<hr class="docutils" />
<section id="find-feature-clusters-x-shap-values-selected-model-data-dictionary-top-n-f">
<h2><code class="docutils literal notranslate"><span class="pre">find_feature_clusters(X,</span> <span class="pre">shap_values,</span> <span class="pre">selected_model,</span> <span class="pre">data_dictionary,</span> <span class="pre">top_n_f)</span></code><a class="headerlink" href="#find-feature-clusters-x-shap-values-selected-model-data-dictionary-top-n-f" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> This function analyzes SHAP values to identify feature clusters and instance clusters using hierarchical clustering. The goal is to visualize the relationships between features and instances in the dataset.</p>
<section id="id55">
<h3>Parameters<a class="headerlink" href="#id55" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">X</span></code>: A pandas DataFrame containing the feature data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shap_values</span></code>: A numpy array of shape <code class="docutils literal notranslate"><span class="pre">(n_samples,</span> <span class="pre">n_features)</span></code> containing SHAP values for each instance and feature.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">selected_model</span></code>: The model used to select features (not used in this function).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_dictionary</span></code>: Not used in this function (possibly used elsewhere in the codebase).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">top_n_f</span></code>: An integer specifying the number of top clusters to display for features.</p></li>
</ul>
</section>
<section id="id56">
<h3>Returns<a class="headerlink" href="#id56" title="Link to this heading">#</a></h3>
<p>A tuple containing three elements:</p>
<ol class="arabic simple">
<li><p>A dictionary (<code class="docutils literal notranslate"><span class="pre">top_n_col_clusters_info</span></code>) where keys are cluster indices and values are lists of feature names within each cluster, ordered by the number of features in descending order.</p></li>
<li><p>A dictionary (<code class="docutils literal notranslate"><span class="pre">row_clusters_info</span></code>) where keys are cluster indices and values are lists of instance indices within each cluster, ordered by the number of instances in descending order.</p></li>
<li><p>A DataFrame (<code class="docutils literal notranslate"><span class="pre">shap_df</span></code>) containing SHAP values with feature names as columns.</p></li>
</ol>
</section>
<section id="functionality">
<h3>Functionality<a class="headerlink" href="#functionality" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>The function first creates a clustermap plot showing relationships between features and instances using SHAP values.</p></li>
<li><p>It then performs hierarchical clustering on the column (feature) data to identify clusters and groups them into <code class="docutils literal notranslate"><span class="pre">top_n_f</span></code> top clusters based on the number of features in each cluster.</p></li>
<li><p>Next, it determines the best number of clusters for row (instance) data using the silhouette score and plots a graph showing the relationship between the number of clusters and the silhouette scores.</p></li>
<li><p>After finding the optimal number of clusters for rows, it performs hierarchical clustering on the row data with the chosen number of clusters and groups instances into <code class="docutils literal notranslate"><span class="pre">best_num_clusters</span></code> top clusters based on the number of instances in each cluster.</p></li>
<li><p>Finally, the function returns three dictionaries and a DataFrame containing SHAP values: one for feature clusters, one for instance clusters, and one for the original SHAP value DataFrame.</p></li>
</ol>
</section>
<section id="notes">
<h3>Notes<a class="headerlink" href="#notes" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>This function assumes that the input data is properly formatted and does not contain any errors or inconsistencies.</p></li>
<li><p>The best number of clusters for row data can be manually adjusted by modifying the range in the <code class="docutils literal notranslate"><span class="pre">silhouette_scores</span></code> loop (currently set to 3-5).</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="generate-subsample-df-seed">
<h2><code class="docutils literal notranslate"><span class="pre">generate_subsample(df,</span> <span class="pre">seed)</span></code><a class="headerlink" href="#generate-subsample-df-seed" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Generates a subsample of the dataset using random sampling.</p>
</section>
<section id="id57">
<h2>Parameters<a class="headerlink" href="#id57" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>df (DataFrame): Original dataset.
seed (int): Random seed for sampling.
</pre></div>
</div>
</section>
<section id="id58">
<h2>Returns<a class="headerlink" href="#id58" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>DataFrame: Subsample of the dataset.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="get-conda-environment">
<h2><code class="docutils literal notranslate"><span class="pre">get_conda_environment()</span></code><a class="headerlink" href="#get-conda-environment" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> This function retrieves the list of packages currently installed in a conda environment. It runs the <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">list</span></code> command and returns the output as a string.</p>
<section id="id59">
<h3>Returns<a class="headerlink" href="#id59" title="Link to this heading">#</a></h3>
<p>A string containing the list of packages installed in the conda environment.</p>
</section>
<section id="id60">
<h3>Notes<a class="headerlink" href="#id60" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>This function assumes that the <code class="docutils literal notranslate"><span class="pre">conda</span></code> command is available on the system and that the user has permission to run it.</p></li>
<li><p>The returned string may be truncated if it exceeds the maximum allowed size by the system.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="get-gpu-info">
<h2><code class="docutils literal notranslate"><span class="pre">get_gpu_info()</span></code><a class="headerlink" href="#get-gpu-info" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> This function retrieves information about NVIDIA GPUs present on the system. If an NVIDIA GPU is detected, it runs the <code class="docutils literal notranslate"><span class="pre">nvidia-smi</span></code> command and returns its output as a string. Otherwise, it returns a message indicating that no NVIDIA GPU is available.</p>
<section id="id61">
<h3>Returns<a class="headerlink" href="#id61" title="Link to this heading">#</a></h3>
<p>A string containing the output of the <code class="docutils literal notranslate"><span class="pre">nvidia-smi</span></code> command if an NVIDIA GPU is detected; otherwise, a message indicating that no NVIDIA GPU is available.</p>
</section>
<section id="id62">
<h3>Notes<a class="headerlink" href="#id62" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>This function assumes that the <code class="docutils literal notranslate"><span class="pre">nvidia-smi</span></code> command is available on the system and that the user has permission to run it.</p></li>
<li><p>The returned string may be truncated if it exceeds the maximum allowed size by the system.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="get-python-info">
<h2><code class="docutils literal notranslate"><span class="pre">get_python_info()</span></code><a class="headerlink" href="#get-python-info" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> This function retrieves the version of Python currently installed on the system. It uses the <code class="docutils literal notranslate"><span class="pre">platform.python_version()</span></code> function to determine the version.</p>
<section id="id63">
<h3>Returns<a class="headerlink" href="#id63" title="Link to this heading">#</a></h3>
<p>A string representing the version of Python.</p>
</section>
<section id="id64">
<h3>Notes<a class="headerlink" href="#id64" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>This function may return a version in the format X.X.Y or X.X, depending on the version of the platform library being used.</p></li>
<li><p>The returned version is specific to the Python interpreter being run, not necessarily the default Python interpreter for the system.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="get-samples-per-class-x-y">
<h2><code class="docutils literal notranslate"><span class="pre">get_samples_per_class(X,</span> <span class="pre">y)</span></code><a class="headerlink" href="#get-samples-per-class-x-y" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> No description available.</p>
</section>
<hr class="docutils" />
<section id="get-system-info">
<h2><code class="docutils literal notranslate"><span class="pre">get_system_info()</span></code><a class="headerlink" href="#get-system-info" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> This function retrieves information about the operating system and hardware configuration of the system. It uses various functions from the <code class="docutils literal notranslate"><span class="pre">platform</span></code> and <code class="docutils literal notranslate"><span class="pre">psutil</span></code> libraries to gather information about the OS, number of CPUs, and memory usage.</p>
<section id="id65">
<h3>Returns<a class="headerlink" href="#id65" title="Link to this heading">#</a></h3>
<p>A dictionary containing three key-value pairs:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'OS'</span></code>: The name of the operating system (e.g., Windows, Linux, Darwin).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Number</span> <span class="pre">of</span> <span class="pre">CPUs'</span></code>: The total number of CPU cores available on the system.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Memory'</span></code>: A string representation of the current memory usage, including both physical and virtual memory.</p></li>
</ul>
</section>
<section id="id66">
<h3>Notes<a class="headerlink" href="#id66" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>This function assumes that the necessary permissions are available to access information about the system hardware.</p></li>
<li><p>The returned dictionary is specific to the current Python interpreter being run, not necessarily the default Python interpreter for the system.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="integrated-brier-score-survival-train-survival-test-estimate-times">
<h2><code class="docutils literal notranslate"><span class="pre">integrated_brier_score(survival_train,</span> <span class="pre">survival_test,</span> <span class="pre">estimate,</span> <span class="pre">times)</span></code><a class="headerlink" href="#integrated-brier-score-survival-train-survival-test-estimate-times" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Compute the Integrated Brier Score (IBS) using scikit-learns Brier score loss.</p>
</section>
<section id="id67">
<h2>Parameters<a class="headerlink" href="#id67" title="Link to this heading">#</a></h2>
<p>survival_train : structured array
Survival times for training data (event indicator, time).
survival_test : structured array
Survival times for test data (event indicator, time).
estimate : array-like, shape = (n_samples, n_times)
Estimated survival probabilities.
times : array-like, shape = (n_times,)
Time points for the calculation.</p>
</section>
<section id="id68">
<h2>Returns<a class="headerlink" href="#id68" title="Link to this heading">#</a></h2>
<p>ibs : float
The Integrated Brier Score (IBS).</p>
</section>
<hr class="docutils" />
<section id="ipy-exit">
<h2><code class="docutils literal notranslate"><span class="pre">ipy_exit()</span></code><a class="headerlink" href="#ipy-exit" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> This function raises an exception to terminate the execution of a Jupyter Notebook or IPython environment. When raised, it creates an instance of <code class="docutils literal notranslate"><span class="pre">SystemExit</span></code> which is handled by Pythons built-in exit mechanism.</p>
</section>
<hr class="docutils" />
<section id="is-hyperparameter-tuning-suitable-data-outcome-var-train-size-train-size-perc-n-splits-outer-cv-folds-n-splits-inner-cv-folds-hptuning">
<h2><code class="docutils literal notranslate"><span class="pre">is_hyperparameter_tuning_suitable(data,</span> <span class="pre">outcome_var,</span> <span class="pre">train_size=train_size_perc,</span> <span class="pre">n_splits_outer=cv_folds,</span> <span class="pre">n_splits_inner=cv_folds_hptuning)</span></code><a class="headerlink" href="#is-hyperparameter-tuning-suitable-data-outcome-var-train-size-train-size-perc-n-splits-outer-cv-folds-n-splits-inner-cv-folds-hptuning" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Checks whether hyperparameter tuning is suitable for a given dataset.</p>
</section>
<section id="id69">
<h2>Parameters:<a class="headerlink" href="#id69" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>data (pandas DataFrame): The input dataset.
outcome_var (str): The name of the column containing the target variable.
train_size (float or int, optional): The proportion of samples to use for training. Defaults to 0.7.
n_splits_outer (int, optional): The number of folds for outer cross-validation. Defaults to 5.
n_splits_inner (int, optional): The number of folds for inner cross-validation. Defaults to 5.
</pre></div>
</div>
</section>
<section id="id70">
<h2>Returns<a class="headerlink" href="#id70" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>None
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="parallel-compute-shap-surv-data-i">
<h2><code class="docutils literal notranslate"><span class="pre">parallel_compute_shap_surv(data,</span> <span class="pre">i)</span></code><a class="headerlink" href="#parallel-compute-shap-surv-data-i" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Computes the SHAP values for a single patient or sample using parallel computing.
This function is used to compute the SHAP (SHapley Additive exPlanations) values for a single patient or sample in parallel, using the <code class="docutils literal notranslate"><span class="pre">parallel_compute_shap_surv</span></code> approach. It takes a pandas DataFrame <code class="docutils literal notranslate"><span class="pre">data</span></code> and an integer index <code class="docutils literal notranslate"><span class="pre">i</span></code> as input, and returns an object of type <code class="docutils literal notranslate"><span class="pre">PredictSurvSHAP</span></code>, which contains the computed SHAP values.</p>
<p>The function uses the <code class="docutils literal notranslate"><span class="pre">Parallel</span></code> class from the <code class="docutils literal notranslate"><span class="pre">loky</span></code> library to run multiple iterations of the computation in parallel, taking advantage of multiple CPU cores for speedup. The number of CPU cores used is controlled by the <code class="docutils literal notranslate"><span class="pre">n_cpu_for_tuning</span></code> variable, which can be adjusted depending on the systems capabilities and the size of the dataset.</p>
<p>The function is then applied to a range of indices using a list comprehension, and the resulting objects are collected into a list called <code class="docutils literal notranslate"><span class="pre">survshaps</span></code>. This approach allows for efficient computation of SHAP values for all samples in the test set.</p>
<p>Parameters:
data (pandas DataFrame): The input data.
i (int): The index of the patient or sample to compute SHAP values for.</p>
</section>
<section id="id71">
<h2>Returns<a class="headerlink" href="#id71" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PredictSurvSHAP: An object containing the computed SHAP values.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="permute-feature-pairs-model-x-y-pairs-n-repeats-random-state-scoring-n-jobs">
<h2><code class="docutils literal notranslate"><span class="pre">permute_feature_pairs(model,</span> <span class="pre">X,</span> <span class="pre">y,</span> <span class="pre">pairs,</span> <span class="pre">n_repeats,</span> <span class="pre">random_state,</span> <span class="pre">scoring,</span> <span class="pre">n_jobs)</span></code><a class="headerlink" href="#permute-feature-pairs-model-x-y-pairs-n-repeats-random-state-scoring-n-jobs" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Computes the permutation importance of pairs of features in a given model.This function computes the permutation importance of pairs of features in a given machine learning model. It takes as input:</p>
<ul class="simple">
<li><p>The model to be used</p></li>
<li><p>The input data <code class="docutils literal notranslate"><span class="pre">X</span></code></p></li>
<li><p>The target variable <code class="docutils literal notranslate"><span class="pre">y</span></code></p></li>
<li><p>A list of tuples, where each tuple contains two feature indices <code class="docutils literal notranslate"><span class="pre">pairs</span></code></p></li>
<li><p>The number of times to repeat the permutation for each pair <code class="docutils literal notranslate"><span class="pre">n_repeats</span></code></p></li>
<li><p>The random seed for reproducibility <code class="docutils literal notranslate"><span class="pre">random_state</span></code></p></li>
<li><p>A function to evaluate the models performance on a given split of data <code class="docutils literal notranslate"><span class="pre">scoring</span></code></p></li>
<li><p>The number of CPU cores to use for parallel computation <code class="docutils literal notranslate"><span class="pre">n_jobs</span></code></p></li>
</ul>
<p>The function returns a dictionary where the keys are tuples of feature indices and the values are the average permutation importances for each pair. This allows users to easily identify which pairs of features have the most significant impact on the models performance.</p>
<p>In this specific implementation, the function is used to compute the permutation importance of all pairs of features in the test data <code class="docutils literal notranslate"><span class="pre">X_test_OHE</span></code> (or <code class="docutils literal notranslate"><span class="pre">X_test</span></code> if the model can handle missing values). The results are then stored in a pandas DataFrame for easy visualization and analysis.</p>
<p>Parameters:
model (object): The machine learning model to be used.
X (pandas DataFrame or numpy array): The input data.
y (pandas Series): The target variable.
pairs (list): A list of tuples, where each tuple contains two feature indices.
n_repeats (int): The number of times to repeat the permutation for each pair.
random_state (int): The random seed for reproducibility.
scoring (function): A function to evaluate the models performance on a given split of data.
n_jobs (int): The number of CPU cores to use for parallel computation.</p>
</section>
<section id="id72">
<h2>Returns<a class="headerlink" href="#id72" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dict: A dictionary where the keys are tuples of feature indices and the values are the average permutation importances for each pair.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="pfi-median-wrap-pfi-folds">
<h2><code class="docutils literal notranslate"><span class="pre">PFI_median_wrap(PFI_folds)</span></code><a class="headerlink" href="#pfi-median-wrap-pfi-folds" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Computes the median importance across all folds and normalizes the importance values.</p>
</section>
<section id="id73">
<h2>Parameters:<a class="headerlink" href="#id73" title="Link to this heading">#</a></h2>
<p>PFI_folds (list of feature importance values in folds): List of DataFrames where each DataFrame contains Feature and Importance columns.</p>
</section>
<section id="id74">
<h2>Returns<a class="headerlink" href="#id74" title="Link to this heading">#</a></h2>
<p>pd.DataFrame: DataFrame with Feature and normalized Importance sorted by importance.</p>
</section>
<hr class="docutils" />
<section id="plot-confusion-matrix-for-clusters-x-y-cluster-info-model-shap-values-top-n">
<h2><code class="docutils literal notranslate"><span class="pre">plot_confusion_matrix_for_clusters(X,</span> <span class="pre">y,</span> <span class="pre">cluster_info,</span> <span class="pre">model,</span> <span class="pre">shap_values,</span> <span class="pre">top_n)</span></code><a class="headerlink" href="#plot-confusion-matrix-for-clusters-x-y-cluster-info-model-shap-values-top-n" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Plots a confusion matrix for each cluster in the test data and visualizes the feature importance using SHAP values.</p>
<p>Parameters:
X (pandas DataFrame or numpy array): The input data.
y (pandas Series): The target variable.
cluster_info (dict): A dictionary indicating the instances in each cluster.
model (object): The machine learning model to be used.
shap_values (numpy array): The SHAP values for the given model and data.
top_n (int): The number of features to display.</p>
<p>This function:</p>
<ol class="arabic simple">
<li><p>Iterates over each unique cluster.</p></li>
<li><p>Subset the test data and target variable for the current cluster.</p></li>
<li><p>Computes the predicted labels using the selected model on the subsetted data.</p></li>
<li><p>Calculates the confusion matrix between the actual labels and predicted labels.</p></li>
<li><p>Plots a heatmap of the confusion matrix with actual label names.</p></li>
<li><p>Displays the feature importance for the current cluster using SHAP values.</p></li>
</ol>
</section>
<hr class="docutils" />
<section id="plot-pfi-pfi-folds-x-model-name">
<h2><code class="docutils literal notranslate"><span class="pre">plot_PFI(PFI_folds,</span> <span class="pre">X,</span> <span class="pre">model_name)</span></code><a class="headerlink" href="#plot-pfi-pfi-folds-x-model-name" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Plot permutation-based feature importances (PFI) from multiple folds using a strip plot.</p>
</section>
<section id="id75">
<h2>Parameters:<a class="headerlink" href="#id75" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>PFI_folds (list of DataFrames): List where each DataFrame contains Feature and Importance columns for each fold.</p></li>
<li><p>X (DataFrame): DataFrame used to determine the number of features for plot sizing.</p></li>
<li><p>model_name (str): A string representing the name of the model or experiment, used for naming the output files.</p></li>
</ul>
</section>
<section id="id76">
<h2>Returns:<a class="headerlink" href="#id76" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Saves the plot with filenames including the model_name parameter and displays it.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="plot-samples-per-class-per-fold-samples-per-class-per-fold">
<h2><code class="docutils literal notranslate"><span class="pre">plot_samples_per_class_per_fold(samples_per_class_per_fold)</span></code><a class="headerlink" href="#plot-samples-per-class-per-fold-samples-per-class-per-fold" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Plots a heatmap of the samples per class per fold.</p>
</section>
<section id="id77">
<h2>Parameters:<a class="headerlink" href="#id77" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>samples_per_class_per_fold (numpy array): A 3D array where each element represents the number of samples for a particular class and fold combination.
</pre></div>
</div>
</section>
<section id="id78">
<h2>Returns<a class="headerlink" href="#id78" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>None
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="plot-survshap-detailed-shap-results-top-n-10-sample-percentage-100">
<h2><code class="docutils literal notranslate"><span class="pre">plot_survshap_detailed(shap_results,</span> <span class="pre">top_n=10,</span> <span class="pre">sample_percentage=100)</span></code><a class="headerlink" href="#plot-survshap-detailed-shap-results-top-n-10-sample-percentage-100" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Optimized function to plot SHAP values over time for the top N features on separate subplots,
with an option to randomly sample a percentage of the data for each feature.</p>
<p>Parameters:
shap_results: List of SHAP results for each sample.
top_n: The number of top features to plot based on mean of max absolute SHAP values.
sample_percentage: Percentage of samples randomly selected to be displayed on the plots (0 &lt; sample_percentage &lt;= 100).</p>
</section>
<hr class="docutils" />
<section id="plot-tfi-x-tree-fi-model-name">
<h2><code class="docutils literal notranslate"><span class="pre">plot_TFI(X,</span> <span class="pre">tree_FI,</span> <span class="pre">model_name)</span></code><a class="headerlink" href="#plot-tfi-x-tree-fi-model-name" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Plots the tree-based feature importances for a given model.</p>
</section>
<section id="id79">
<h2>Parameters:<a class="headerlink" href="#id79" title="Link to this heading">#</a></h2>
<p>X (pd.DataFrame): The training data used for feature names.
tree_FI (list of pd.Series): List of feature importance scores for tree-based feature importance from each fold.
model_name (str): Name of the model to use in the plot title and filenames.</p>
</section>
<section id="id80">
<h2>Returns<a class="headerlink" href="#id80" title="Link to this heading">#</a></h2>
<p>None: Displays and saves the plot.</p>
</section>
<hr class="docutils" />
<section id="save-notebook">
<h2><code class="docutils literal notranslate"><span class="pre">save_notebook()</span></code><a class="headerlink" href="#save-notebook" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> This function saves the current state of a Jupyter Notebook to disk, effectively pausing the notebooks execution and preserving its environment, code, and data. The <code class="docutils literal notranslate"><span class="pre">IPython.notebook.save_checkpoint()</span></code> function is used internally by Jupyter to perform this task.</p>
<section id="id81">
<h3>Notes<a class="headerlink" href="#id81" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>When this function is called, it will save the notebooks current state to a file in the format <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code>, which can be loaded later into the same or another instance of Jupyter Notebook.</p></li>
<li><p>This function does not execute any code; it simply saves the current state of the notebook and returns control to the caller.</p></li>
</ul>
<p>By calling this function, you can:</p>
<ul class="simple">
<li><p>Pause an ongoing computation and resume it later without losing its progress</p></li>
<li><p>Save a snapshot of your work for reference or sharing with others</p></li>
<li><p>Ensure that your changes are persisted even if the notebook is terminated unexpectedly</p></li>
</ul>
<p>However, note that saving a notebook will also save any unsaved changes to the cell contents, which may not be what you want in all cases. To avoid this, consider using the <code class="docutils literal notranslate"><span class="pre">save</span></code> method explicitly.</p>
</section>
</section>
<hr class="docutils" />
<section id="set-parameters-n-rows-n-cols-class-proportion">
<h2><code class="docutils literal notranslate"><span class="pre">set_parameters(n_rows,</span> <span class="pre">n_cols,</span> <span class="pre">class_proportion)</span></code><a class="headerlink" href="#set-parameters-n-rows-n-cols-class-proportion" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Sets the parameters for different machine learning classifiers based on the given dataset characteristics.</p>
</section>
<section id="id82">
<h2>Parameters:<a class="headerlink" href="#id82" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>n_rows (int): The number of rows in the dataset.
n_cols (int): The number of columns in the dataset.
class_proportion (float): The proportion of classes in the dataset.
</pre></div>
</div>
</section>
<section id="id83">
<h2>Returns<a class="headerlink" href="#id83" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>A dictionary containing the parameters for each classifier, including:
    - Balanced Random Forest Classifier
    - LightGBM Classifier
    - Histogram-Based Gradient Boosting Classifier
    - CatBoost Classifier
    - Logistic Regression
</pre></div>
</div>
<p>Note that this function assumes hyperparameter tuning is not done and sets default values based on the dataset characteristics.</p>
</section>
<hr class="docutils" />
<section id="set-params-surv-models-n-rows">
<h2><code class="docutils literal notranslate"><span class="pre">set_params_surv_models(n_rows)</span></code><a class="headerlink" href="#set-params-surv-models-n-rows" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Sets the parameters for different survival models based on the given dataset characteristics.</p>
<p>Parameters:
n_rows (int): The number of rows in the dataset.</p>
</section>
<section id="id84">
<h2>Returns<a class="headerlink" href="#id84" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>A dictionary containing the parameters for each survival model, including:
    - Random Survival Forest (RSF)
    - Cox proportional hazards regression (CoxPH)
    - Cox proportional hazards regression with L1 regularization (Coxnet)
</pre></div>
</div>
<p>Note that these functions assume hyperparameter tuning is not done and set default values based on common practices in survival analysis.</p>
</section>
<hr class="docutils" />
<section id="shap-summary-plot-shap-values-data-model-name">
<h2><code class="docutils literal notranslate"><span class="pre">shap_summary_plot(shap_values,</span> <span class="pre">data,</span> <span class="pre">model_name)</span></code><a class="headerlink" href="#shap-summary-plot-shap-values-data-model-name" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Generates and saves a SHAP summary plot based on provided SHAP values and data from cross validation</p>
<p>Parameters:</p>
<ul class="simple">
<li><p>shap_values: concatenated list of SHAP values arrays from different folds</p></li>
<li><p>data: DataFrames (trainset or testset)</p></li>
<li><p>model_name: Name of the model (e.g., CB for CatBoost)</p></li>
</ul>
</section>
<section id="id85">
<h2>Returns<a class="headerlink" href="#id85" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>None: Saves the plot as a .tif file and displays it.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="shorten-column-names-df-max-length">
<h2><code class="docutils literal notranslate"><span class="pre">shorten_column_names(df,</span> <span class="pre">max_length)</span></code><a class="headerlink" href="#shorten-column-names-df-max-length" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Shortens column names in a pandas DataFrame to fit within a maximum length.</p>
<p>Parameters:
df (pandas.DataFrame): The input DataFrame containing the columns to be shortened.
max_length (int): The maximum allowed length for each column name.</p>
</section>
<section id="id86">
<h2>Returns<a class="headerlink" href="#id86" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>list: A list of shortened column names.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="shorten-data-dictionary-data-dict-max-length">
<h2><code class="docutils literal notranslate"><span class="pre">shorten_data_dictionary(data_dict,</span> <span class="pre">max_length)</span></code><a class="headerlink" href="#shorten-data-dictionary-data-dict-max-length" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Shortens values in a dictionary to fit within a specified maximum length.</p>
<p>This function replaces long values with shorter versions by truncating them and adding an ellipsis () if necessary.
If two values have the same length after truncation, it appends a numeric suffix (e.g., value_1, value_2) to make them unique.</p>
</section>
<section id="id87">
<h2>Parameters:<a class="headerlink" href="#id87" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>data_dict (dict): The input dictionary containing the keys and values to be shortened.
max_length (int): The maximum allowed length for each value in the dictionary.
</pre></div>
</div>
</section>
<section id="id88">
<h2>Returns<a class="headerlink" href="#id88" title="Link to this heading">#</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dict: A new dictionary with shortened values.
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="subsample-iqr-test-shap-values-num-subsamples-1000-threshold-0-confidence-level-0-95-random-seed-none">
<h2><code class="docutils literal notranslate"><span class="pre">subsample_iqr_test(shap_values,</span> <span class="pre">num_subsamples=1000,</span> <span class="pre">threshold=0,</span> <span class="pre">confidence_level=0.95,</span> <span class="pre">random_seed=None)</span></code><a class="headerlink" href="#subsample-iqr-test-shap-values-num-subsamples-1000-threshold-0-confidence-level-0-95-random-seed-none" title="Link to this heading">#</a></h2>
<p><strong>Description:</strong> Perform subsampling and check if the IQR crosses zero in the SHAP values.</p>
<p>Parameters:</p>
<ul class="simple">
<li><p>shap_values: Array of SHAP values for a given feature</p></li>
<li><p>num_subsamples: Number of subsamples to generate</p></li>
<li><p>threshold: Threshold to determine significance (default None means use zero)</p></li>
<li><p>confidence_level: Threshold for determining significance (default 95%)</p></li>
<li><p>random_seed: Seed for reproducibility of random sampling</p></li>
</ul>
</section>
<section id="id89">
<h2>Returns<a class="headerlink" href="#id89" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>proportion_crossing_zero: The proportion of subsamples where the IQR crosses zero</p></li>
</ul>
<hr class="docutils" />
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Executed_tutorials.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Executed tutorials</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#glossary">Glossary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#del-self"><code class="docutils literal notranslate"><span class="pre">__del__(self)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#init-self"><code class="docutils literal notranslate"><span class="pre">__init__(self)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adjust-hyperparameters-n-rows-n-cols"><code class="docutils literal notranslate"><span class="pre">adjust_hyperparameters(n_rows,</span> <span class="pre">n_cols)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parameters">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#returns">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adjust-hyperparameters-surv-models-n-rows"><code class="docutils literal notranslate"><span class="pre">adjust_hyperparameters_surv_models(n_rows)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aggregate-shap-values-with-base-survshaps-x-test-surv-aggregation-mean-abs"><code class="docutils literal notranslate"><span class="pre">aggregate_shap_values_with_base(survshaps,</span> <span class="pre">X_test_surv,</span> <span class="pre">aggregation='mean_abs')</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bootstrap-sample-data-n-samples"><code class="docutils literal notranslate"><span class="pre">bootstrap_sample(data,</span> <span class="pre">n_samples)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-biserial-corr-subsample-outcome-var"><code class="docutils literal notranslate"><span class="pre">calculate_biserial_corr(subsample,</span> <span class="pre">outcome_var)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-confidence-interval-metric-values-alpha-0-95"><code class="docutils literal notranslate"><span class="pre">calculate_confidence_interval(metric_values,</span> <span class="pre">alpha=0.95)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-metrics-y-true-y-pred-y-pred-proba"><code class="docutils literal notranslate"><span class="pre">calculate_metrics(y_true,</span> <span class="pre">y_pred,</span> <span class="pre">y_pred_proba)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-missingness-data-output-file-missingness-report-xlsx"><code class="docutils literal notranslate"><span class="pre">calculate_missingness(data,</span> <span class="pre">output_file='missingness_report.xlsx')</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-mutual-info-subsample-outcome-var"><code class="docutils literal notranslate"><span class="pre">calculate_mutual_info(subsample,</span> <span class="pre">outcome_var)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-surv-metrics-y-true-model-x-test-survival-train-survival-test"><code class="docutils literal notranslate"><span class="pre">calculate_surv_metrics(y_true,</span> <span class="pre">model,</span> <span class="pre">X_test,</span> <span class="pre">survival_train,</span> <span class="pre">survival_test)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#categorical-shap-plot-shap-values-data-top-n-10-jitter-0-1"><code class="docutils literal notranslate"><span class="pre">categorical_shap_plot(shap_values,</span> <span class="pre">data,</span> <span class="pre">top_n=10,</span> <span class="pre">jitter=0.1)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#check-categorical-difference-train-data-test-data"><code class="docutils literal notranslate"><span class="pre">check_categorical_difference(train_data,</span> <span class="pre">test_data)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#check-numerical-difference-train-data-test-data"><code class="docutils literal notranslate"><span class="pre">check_numerical_difference(train_data,</span> <span class="pre">test_data)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id22">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id23">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#combined-metric-y-true-y-pred-proba"><code class="docutils literal notranslate"><span class="pre">combined_metric(y_true,</span> <span class="pre">y_pred_proba)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id24">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id25">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conformal-p-value-prob-calibration-scores-true-label"><code class="docutils literal notranslate"><span class="pre">conformal_p_value(prob,</span> <span class="pre">calibration_scores,</span> <span class="pre">true_label)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id26">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id27">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cost-sensitive-net-benefit-tp-fp-threshold-n-w-tp-1-w-fp-1"><code class="docutils literal notranslate"><span class="pre">cost_sensitive_net_benefit(tp,</span> <span class="pre">fp,</span> <span class="pre">threshold,</span> <span class="pre">N,</span> <span class="pre">w_tp=1,</span> <span class="pre">w_fp=1)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id28">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id29">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-summary-table-dataframe-dataset-name"><code class="docutils literal notranslate"><span class="pre">create_summary_table(dataframe,</span> <span class="pre">dataset_name)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id30">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id31">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cross-validate-model-model-class-x-y-sample-weights-none-n-splits-cv-folds-random-state-seed-measures-none-use-default-threshold-false"><code class="docutils literal notranslate"><span class="pre">cross_validate_model(model_class,</span> <span class="pre">X,</span> <span class="pre">y,</span> <span class="pre">sample_weights=None,</span> <span class="pre">n_splits=cv_folds,</span> <span class="pre">random_state=SEED,</span> <span class="pre">measures=None,</span> <span class="pre">use_default_threshold=False)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id32">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id33">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cross-validate-surv-model-model-class-x-y-n-splits-cv-folds-random-state-seed-measures-none-hp-tuning-false"><code class="docutils literal notranslate"><span class="pre">cross_validate_surv_model(model_class,</span> <span class="pre">X,</span> <span class="pre">y,</span> <span class="pre">n_splits=cv_folds,</span> <span class="pre">random_state=SEED,</span> <span class="pre">measures=None,</span> <span class="pre">hp_tuning=False)</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#function-signature">Function Signature</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id34">Parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#function-behavior">Function Behavior</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id35">Returns</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#decision-curve-analysis-pred-probs-selected-model-pred-probs-alternative-model-rand-pred-probs-w-tp-1-w-fp-1"><code class="docutils literal notranslate"><span class="pre">decision_curve_analysis(pred_probs_selected_model,</span> <span class="pre">pred_probs_alternative_model,</span> <span class="pre">rand_pred_probs,</span> <span class="pre">w_tp=1,</span> <span class="pre">w_fp=1)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id36">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id37">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#display-confusion-matrix-y-true-y-pred-labels"><code class="docutils literal notranslate"><span class="pre">display_confusion_matrix(y_true,</span> <span class="pre">y_pred,</span> <span class="pre">labels)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id38">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id39">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#euclidean-distance-x-y"><code class="docutils literal notranslate"><span class="pre">euclidean_distance(x,</span> <span class="pre">y)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id40">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id41">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#evaluate-and-plot-model-model-testset-y-test-filename-class-labels-class-labels-display-threshold-0-5-bootstrap-samples-1000-min-positive-instances-1"><code class="docutils literal notranslate"><span class="pre">evaluate_and_plot_model(model,</span> <span class="pre">testset,</span> <span class="pre">y_test,</span> <span class="pre">filename,</span> <span class="pre">class_labels=class_labels_display,</span> <span class="pre">threshold=0.5,</span> <span class="pre">bootstrap_samples=1000,</span> <span class="pre">min_positive_instances=1)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id42">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id43">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#evaluate-params-n-epochs-max-complexity"><code class="docutils literal notranslate"><span class="pre">evaluate_params(n_epochs,</span> <span class="pre">max_complexity)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id44">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#evaluate-params-kfold-n-epochs-max-complexity"><code class="docutils literal notranslate"><span class="pre">evaluate_params_kfold(n_epochs,</span> <span class="pre">max_complexity)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id45">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id46">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#extract-mean-value"><code class="docutils literal notranslate"><span class="pre">extract_mean(value)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id47">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#f-imp-shapboxplot-shap-values-x-test-ohe-x-test-selected-model-data-dictionary-num-features-20-num-subsamples-1000-random-seed-none-apply-threshold-false"><code class="docutils literal notranslate"><span class="pre">f_imp_shapboxplot(shap_values,</span> <span class="pre">X_test_OHE,</span> <span class="pre">X_test,</span> <span class="pre">selected_model,</span> <span class="pre">data_dictionary,</span> <span class="pre">num_features=20,</span> <span class="pre">num_subsamples=1000,</span> <span class="pre">random_seed=None,</span> <span class="pre">apply_threshold=False)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id48">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#f-imp-shapboxplot-surv-shap-values-x-test-num-features-20-num-subsamples-1000-random-seed-none-apply-threshold-false"><code class="docutils literal notranslate"><span class="pre">f_imp_shapboxplot_surv(shap_values,</span> <span class="pre">X_test,</span> <span class="pre">num_features=20,</span> <span class="pre">num_subsamples=1000,</span> <span class="pre">random_seed=None,</span> <span class="pre">apply_threshold=False)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id49">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id50">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filter-columns-df-threshold-0-9"><code class="docutils literal notranslate"><span class="pre">filter_columns(df,</span> <span class="pre">threshold=0.9)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id51">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id52">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filter-rows-df-threshold-0-9"><code class="docutils literal notranslate"><span class="pre">filter_rows(df,</span> <span class="pre">threshold=0.9)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id53">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id54">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#find-feature-clusters-x-shap-values-selected-model-data-dictionary-top-n-f"><code class="docutils literal notranslate"><span class="pre">find_feature_clusters(X,</span> <span class="pre">shap_values,</span> <span class="pre">selected_model,</span> <span class="pre">data_dictionary,</span> <span class="pre">top_n_f)</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id55">Parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id56">Returns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#functionality">Functionality</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#notes">Notes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-subsample-df-seed"><code class="docutils literal notranslate"><span class="pre">generate_subsample(df,</span> <span class="pre">seed)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id57">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id58">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-conda-environment"><code class="docutils literal notranslate"><span class="pre">get_conda_environment()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id59">Returns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id60">Notes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-gpu-info"><code class="docutils literal notranslate"><span class="pre">get_gpu_info()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id61">Returns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id62">Notes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-python-info"><code class="docutils literal notranslate"><span class="pre">get_python_info()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id63">Returns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id64">Notes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-samples-per-class-x-y"><code class="docutils literal notranslate"><span class="pre">get_samples_per_class(X,</span> <span class="pre">y)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-system-info"><code class="docutils literal notranslate"><span class="pre">get_system_info()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id65">Returns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id66">Notes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#integrated-brier-score-survival-train-survival-test-estimate-times"><code class="docutils literal notranslate"><span class="pre">integrated_brier_score(survival_train,</span> <span class="pre">survival_test,</span> <span class="pre">estimate,</span> <span class="pre">times)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id67">Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id68">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ipy-exit"><code class="docutils literal notranslate"><span class="pre">ipy_exit()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#is-hyperparameter-tuning-suitable-data-outcome-var-train-size-train-size-perc-n-splits-outer-cv-folds-n-splits-inner-cv-folds-hptuning"><code class="docutils literal notranslate"><span class="pre">is_hyperparameter_tuning_suitable(data,</span> <span class="pre">outcome_var,</span> <span class="pre">train_size=train_size_perc,</span> <span class="pre">n_splits_outer=cv_folds,</span> <span class="pre">n_splits_inner=cv_folds_hptuning)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id69">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id70">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parallel-compute-shap-surv-data-i"><code class="docutils literal notranslate"><span class="pre">parallel_compute_shap_surv(data,</span> <span class="pre">i)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id71">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#permute-feature-pairs-model-x-y-pairs-n-repeats-random-state-scoring-n-jobs"><code class="docutils literal notranslate"><span class="pre">permute_feature_pairs(model,</span> <span class="pre">X,</span> <span class="pre">y,</span> <span class="pre">pairs,</span> <span class="pre">n_repeats,</span> <span class="pre">random_state,</span> <span class="pre">scoring,</span> <span class="pre">n_jobs)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id72">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pfi-median-wrap-pfi-folds"><code class="docutils literal notranslate"><span class="pre">PFI_median_wrap(PFI_folds)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id73">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id74">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-confusion-matrix-for-clusters-x-y-cluster-info-model-shap-values-top-n"><code class="docutils literal notranslate"><span class="pre">plot_confusion_matrix_for_clusters(X,</span> <span class="pre">y,</span> <span class="pre">cluster_info,</span> <span class="pre">model,</span> <span class="pre">shap_values,</span> <span class="pre">top_n)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-pfi-pfi-folds-x-model-name"><code class="docutils literal notranslate"><span class="pre">plot_PFI(PFI_folds,</span> <span class="pre">X,</span> <span class="pre">model_name)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id75">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id76">Returns:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-samples-per-class-per-fold-samples-per-class-per-fold"><code class="docutils literal notranslate"><span class="pre">plot_samples_per_class_per_fold(samples_per_class_per_fold)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id77">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id78">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-survshap-detailed-shap-results-top-n-10-sample-percentage-100"><code class="docutils literal notranslate"><span class="pre">plot_survshap_detailed(shap_results,</span> <span class="pre">top_n=10,</span> <span class="pre">sample_percentage=100)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-tfi-x-tree-fi-model-name"><code class="docutils literal notranslate"><span class="pre">plot_TFI(X,</span> <span class="pre">tree_FI,</span> <span class="pre">model_name)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id79">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id80">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#save-notebook"><code class="docutils literal notranslate"><span class="pre">save_notebook()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id81">Notes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#set-parameters-n-rows-n-cols-class-proportion"><code class="docutils literal notranslate"><span class="pre">set_parameters(n_rows,</span> <span class="pre">n_cols,</span> <span class="pre">class_proportion)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id82">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id83">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#set-params-surv-models-n-rows"><code class="docutils literal notranslate"><span class="pre">set_params_surv_models(n_rows)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id84">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#shap-summary-plot-shap-values-data-model-name"><code class="docutils literal notranslate"><span class="pre">shap_summary_plot(shap_values,</span> <span class="pre">data,</span> <span class="pre">model_name)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id85">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#shorten-column-names-df-max-length"><code class="docutils literal notranslate"><span class="pre">shorten_column_names(df,</span> <span class="pre">max_length)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id86">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#shorten-data-dictionary-data-dict-max-length"><code class="docutils literal notranslate"><span class="pre">shorten_data_dictionary(data_dict,</span> <span class="pre">max_length)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id87">Parameters:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id88">Returns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#subsample-iqr-test-shap-values-num-subsamples-1000-threshold-0-confidence-level-0-95-random-seed-none"><code class="docutils literal notranslate"><span class="pre">subsample_iqr_test(shap_values,</span> <span class="pre">num_subsamples=1000,</span> <span class="pre">threshold=0,</span> <span class="pre">confidence_level=0.95,</span> <span class="pre">random_seed=None)</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id89">Returns</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Ramtin Zargari Marandi
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
       Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>